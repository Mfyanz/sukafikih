<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Pengetahuan Haji</title>
  <meta name="description" content="Uji pengetahuan Anda tentang ibadah haji dengan quiz interaktif ini">
  
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Configure Tailwind -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f7ff',
              100: '#e0efff',
              200: '#bae0ff',
              300: '#7cc6ff',
              400: '#36a9ff',
              500: '#0090ff',
              600: '#0072e6',
              700: '#005db3',
              800: '#004c99',
              900: '#003a75',
            }
          },
          animation: {
            'bounce-slow': 'bounce 2s infinite',
            'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8fafc;
    }
    
    .option-card {
      transition: all 0.3s ease;
    }
    
    .option-card:hover {
      transform: translateY(-3px);
    }
    
    .option-card.selected {
      border-color: #0090ff;
      background-color: #e0efff;
    }
    
    .option-card.correct {
      border-color: #10b981;
      background-color: #d1fae5;
    }
    
    .option-card.incorrect {
      border-color: #ef4444;
      background-color: #fee2e2;
    }
    
    .progress-bar {
      transition: width 0.5s ease;
    }
    
    @keyframes countdown {
      from { width: 100%; }
      to { width: 0%; }
    }
    
    .timer-bar {
      animation: countdown 15s linear forwards;
    }
    
    .score-animation {
      animation: scorePopup 0.5s ease-out;
    }
    
    @keyframes scorePopup {
      0% { transform: scale(0.5); opacity: 0; }
      70% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #0090ff;
      opacity: 0;
    }
  </style>
</head>
<body>
  <div class="min-h-screen flex flex-col">
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="flex flex-col items-center justify-center min-h-screen p-4">
      <div class="max-w-md w-full bg-white rounded-xl shadow-lg overflow-hidden">
        <div class="bg-primary-600 p-6 text-white text-center">
          <h1 class="text-2xl md:text-3xl font-bold">Quiz Pengetahuan Haji</h1>
          <p class="mt-2 opacity-90">Uji pengetahuan Anda tentang ibadah haji</p>
        </div>
        
        <div class="p-6">
          <div class="mb-6">
            <p class="text-gray-700 mb-4">Selamat datang di Quiz Pengetahuan Haji! Anda akan menjawab 10 pertanyaan tentang ibadah haji. Setiap pertanyaan memiliki batas waktu 15 detik.</p>
            
            <div class="bg-primary-50 p-4 rounded-lg mb-4">
              <h3 class="font-semibold text-primary-700 mb-2">Cara Bermain:</h3>
              <ul class="text-gray-700 space-y-1 text-sm">
                <li class="flex items-start">
                  <span class="text-primary-500 mr-2">•</span>
                  <span>Jawab 10 pertanyaan pilihan ganda</span>
                </li>
                <li class="flex items-start">
                  <span class="text-primary-500 mr-2">•</span>
                  <span>Setiap pertanyaan bernilai 10 poin</span>
                </li>
                <li class="flex items-start">
                  <span class="text-primary-500 mr-2">•</span>
                  <span>Jawaban cepat mendapatkan bonus poin</span>
                </li>
                <li class="flex items-start">
                  <span class="text-primary-500 mr-2">•</span>
                  <span>Waktu habis = tidak mendapat poin</span>
                </li>
              </ul>
            </div>
            
            <div class="mb-6">
              <label for="player-name" class="block text-sm font-medium text-gray-700 mb-1">Nama Anda (opsional):</label>
              <input type="text" id="player-name" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500" placeholder="Masukkan nama Anda">
            </div>
          </div>
          
          <button id="start-quiz" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center">
            <span>Mulai Quiz</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Quiz Screen -->
    <div id="quiz-screen" class="flex-1 p-4 hidden">
      <div class="max-w-3xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-md p-4 mb-4">
          <div class="flex justify-between items-center mb-2">
            <div class="flex items-center">
              <div class="bg-primary-600 text-white p-2 rounded-md mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z" />
                </svg>
              </div>
              <h2 class="text-lg font-semibold text-gray-800">Quiz Pengetahuan Haji</h2>
            </div>
            <div class="flex items-center">
              <div class="text-sm font-medium text-gray-600 mr-2">Skor:</div>
              <div id="score-display" class="bg-primary-100 text-primary-800 font-semibold px-3 py-1 rounded-full">0</div>
            </div>
          </div>
          
          <!-- Progress Bar -->
          <div class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
            <div id="progress-bar" class="bg-primary-600 h-2.5 rounded-full progress-bar" style="width: 10%"></div>
          </div>
          <div class="flex justify-between text-xs text-gray-500">
            <div id="question-counter">Pertanyaan 1 dari 10</div>
            <div id="time-bonus">Bonus waktu: +5</div>
          </div>
        </div>
        
        <!-- Question Card -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden mb-4">
          <!-- Timer Bar -->
          <div class="w-full bg-gray-200 h-1.5">
            <div id="timer-bar" class="bg-primary-600 h-1.5 timer-bar"></div>
          </div>
          
          <div class="p-6">
            <h3 id="question-text" class="text-xl font-semibold text-gray-800 mb-6">Apa pengertian dari ibadah haji?</h3>
            
            <div id="options-container" class="grid grid-cols-1 gap-3">
              <!-- Options will be inserted here by JavaScript -->
            </div>
          </div>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="flex justify-between">
          <button id="prev-question" class="bg-white text-primary-700 font-medium py-2 px-4 rounded-lg border border-primary-300 hover:bg-primary-50 transition-colors hidden">
            <div class="flex items-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
              </svg>
              <span>Sebelumnya</span>
            </div>
          </button>
          
          <button id="next-question" class="bg-primary-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            <div class="flex items-center">
              <span>Selanjutnya</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </div>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="flex-1 p-4 hidden">
      <div class="max-w-2xl mx-auto">
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
          <div class="bg-primary-600 p-6 text-white text-center">
            <h2 class="text-2xl font-bold mb-1">Quiz Selesai!</h2>
            <p class="opacity-90">Berikut adalah hasil quiz Anda</p>
          </div>
          
          <div class="p-6">
            <!-- Score Circle -->
            <div class="flex justify-center mb-6">
              <div class="relative">
                <svg class="w-48 h-48">
                  <circle cx="96" cy="96" r="88" fill="none" stroke="#e0efff" stroke-width="16" />
                  <circle id="score-circle" cx="96" cy="96" r="88" fill="none" stroke="#0090ff" stroke-width="16" stroke-dasharray="553" stroke-dashoffset="553" transform="rotate(-90 96 96)" />
                </svg>
                <div class="absolute inset-0 flex flex-col items-center justify-center score-animation">
                  <div id="final-score" class="text-5xl font-bold text-primary-700">0</div>
                  <div class="text-gray-500">dari 100</div>
                </div>
              </div>
            </div>
            
            <!-- Performance Stats -->
            <div class="grid grid-cols-2 gap-4 mb-6">
              <div class="bg-primary-50 rounded-lg p-4 text-center">
                <div class="text-primary-700 font-semibold text-lg" id="correct-answers">0</div>
                <div class="text-gray-600 text-sm">Jawaban Benar</div>
              </div>
              <div class="bg-primary-50 rounded-lg p-4 text-center">
                <div class="text-primary-700 font-semibold text-lg" id="time-bonus-total">0</div>
                <div class="text-gray-600 text-sm">Bonus Waktu</div>
              </div>
            </div>
            
            <!-- Performance Message -->
            <div class="bg-gray-50 rounded-lg p-4 mb-6">
              <h3 class="font-semibold text-gray-800 mb-2" id="performance-title">Hasil Evaluasi</h3>
              <p class="text-gray-700" id="performance-message">Anda telah menyelesaikan quiz dengan baik!</p>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3">
              <button id="retry-quiz" class="flex-1 bg-primary-600 hover:bg-primary-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                Coba Lagi
              </button>
              <button id="share-results" class="flex-1 bg-white hover:bg-gray-50 text-primary-700 font-semibold py-3 px-6 rounded-lg border border-primary-300 transition-colors flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
                </svg>
                Bagikan Hasil
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Quiz data
      const quizData = [
        {
          question: "Apa pengertian dari ibadah haji?",
          options: [
            "Berkunjung ke Masjidil Haram kapan saja",
            "Mengunjungi tempat-tempat tertentu di Mekah pada waktu tertentu dengan niat beribadah",
            "Berziarah ke makam Nabi Muhammad SAW",
            "Melakukan perjalanan ke Madinah"
          ],
          correctAnswer: 1
        },
        {
          question: "Kapan waktu pelaksanaan ibadah haji?",
          options: [
            "Bulan Ramadhan",
            "Bulan Syawal",
            "Bulan Dzulhijjah",
            "Sepanjang tahun"
          ],
          correctAnswer: 2
        },
        {
          question: "Apa hukum melaksanakan ibadah haji bagi yang mampu?",
          options: [
            "Sunnah",
            "Wajib",
            "Mubah",
            "Makruh"
          ],
          correctAnswer: 1
        },
        {
          question: "Manakah yang termasuk rukun haji?",
          options: [
            "Memakai pakaian ihram",
            "Bermalam di Muzdalifah",
            "Wukuf di Arafah",
            "Melempar jumrah"
          ],
          correctAnswer: 2
        },
        {
          question: "Apa yang dimaksud dengan wukuf?",
          options: [
            "Berlari kecil antara bukit Shafa dan Marwah",
            "Berdiam diri di padang Arafah pada tanggal 9 Dzulhijjah",
            "Melempar batu ke tiang jumrah",
            "Mengelilingi Ka'bah sebanyak 7 kali"
          ],
          correctAnswer: 1
        },
        {
          question: "Apa yang dimaksud dengan sa'i?",
          options: [
            "Berjalan atau berlari-lari kecil antara Shafa dan Marwah",
            "Melempar batu ke tiang jumrah",
            "Mengelilingi Ka'bah sebanyak 7 kali",
            "Bermalam di Mina"
          ],
          correctAnswer: 0
        },
        {
          question: "Berapa kali thawaf dilakukan dalam ibadah haji?",
          options: [
            "3 kali",
            "5 kali",
            "7 kali",
            "9 kali"
          ],
          correctAnswer: 2
        },
        {
          question: "Apa yang dimaksud dengan thawaf?",
          options: [
            "Berlari kecil antara bukit Shafa dan Marwah",
            "Berdiam diri di padang Arafah",
            "Melempar batu ke tiang jumrah",
            "Mengelilingi Ka'bah"
          ],
          correctAnswer: 3
        },
        {
          question: "Apa yang dimaksud dengan ihram dalam ibadah haji?",
          options: [
            "Pakaian khusus untuk ibadah haji",
            "Niat memulai ibadah haji atau umrah",
            "Larangan-larangan selama ibadah haji",
            "Semua jawaban benar"
          ],
          correctAnswer: 3
        },
        {
          question: "Manakah yang bukan termasuk syarat wajib haji?",
          options: [
            "Islam",
            "Baligh",
            "Berakal",
            "Sudah pernah umrah"
          ],
          correctAnswer: 3
        }
      ];
      
      // Game variables
      let currentQuestion = 0;
      let score = 0;
      let selectedOption = null;
      let answeredQuestions = new Array(quizData.length).fill(false);
      let timeBonus = 0;
      let timeBonusTotal = 0;
      let timerInterval;
      let playerName = "";
      
      // DOM Elements
      const welcomeScreen = document.getElementById('welcome-screen');
      const quizScreen = document.getElementById('quiz-screen');
      const resultsScreen = document.getElementById('results-screen');
      const playerNameInput = document.getElementById('player-name');
      const startQuizBtn = document.getElementById('start-quiz');
      const questionText = document.getElementById('question-text');
      const optionsContainer = document.getElementById('options-container');
      const nextQuestionBtn = document.getElementById('next-question');
      const prevQuestionBtn = document.getElementById('prev-question');
      const progressBar = document.getElementById('progress-bar');
      const questionCounter = document.getElementById('question-counter');
      const scoreDisplay = document.getElementById('score-display');
      const timeBonusDisplay = document.getElementById('time-bonus');
      const timerBar = document.getElementById('timer-bar');
      const finalScore = document.getElementById('final-score');
      const scoreCircle = document.getElementById('score-circle');
      const correctAnswers = document.getElementById('correct-answers');
      const timeBonusTotalDisplay = document.getElementById('time-bonus-total');
      const performanceTitle = document.getElementById('performance-title');
      const performanceMessage = document.getElementById('performance-message');
      const retryQuizBtn = document.getElementById('retry-quiz');
      const shareResultsBtn = document.getElementById('share-results');
      
      // Event Listeners
      startQuizBtn.addEventListener('click', startQuiz);
      nextQuestionBtn.addEventListener('click', goToNextQuestion);
      prevQuestionBtn.addEventListener('click', goToPrevQuestion);
      retryQuizBtn.addEventListener('click', resetQuiz);
      shareResultsBtn.addEventListener('click', shareResults);
      
      // Initialize the quiz
      function startQuiz() {
        playerName = playerNameInput.value.trim();
        welcomeScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        loadQuestion();
      }
      
      // Load question and options
      function loadQuestion() {
        resetTimer();
        const question = quizData[currentQuestion];
        questionText.textContent = question.question;
        
        // Update progress
        progressBar.style.width = `${((currentQuestion + 1) / quizData.length) * 100}%`;
        questionCounter.textContent = `Pertanyaan ${currentQuestion + 1} dari ${quizData.length}`;
        
        // Clear previous options
        optionsContainer.innerHTML = '';
        
        // Add options
        question.options.forEach((option, index) => {
          const optionCard = document.createElement('div');
          optionCard.className = 'option-card p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-primary-300';
          optionCard.dataset.index = index;
          
          // If this question was already answered, show the correct/incorrect state
          if (answeredQuestions[currentQuestion]) {
            if (index === question.correctAnswer) {
              optionCard.classList.add('correct');
            } else if (index === selectedOption && index !== question.correctAnswer) {
              optionCard.classList.add('incorrect');
            }
          }
          
          // If this option was previously selected, mark it
          if (index === selectedOption && !answeredQuestions[currentQuestion]) {
            optionCard.classList.add('selected');
          }
          
          optionCard.innerHTML = `
            <div class="flex items-center">
              <div class="w-6 h-6 rounded-full border-2 border-gray-300 flex items-center justify-center mr-3 flex-shrink-0">
                <span class="text-sm font-medium">${String.fromCharCode(65 + index)}</span>
              </div>
              <span>${option}</span>
            </div>
          `;
          
          optionCard.addEventListener('click', () => selectOption(index));
          optionsContainer.appendChild(optionCard);
        });
        
        // Update button states
        updateButtonStates();
        
        // Start timer if question not answered yet
        if (!answeredQuestions[currentQuestion]) {
          startTimer();
        } else {
          // Disable option selection if already answered
          const options = document.querySelectorAll('.option-card');
          options.forEach(option => {
            option.style.cursor = 'default';
            option.removeEventListener('click', selectOption);
          });
        }
      }
      
      // Select an option
      function selectOption(index) {
        // If already answered, do nothing
        if (answeredQuestions[currentQuestion]) return;
        
        // Clear previous selection
        const options = document.querySelectorAll('.option-card');
        options.forEach(option => option.classList.remove('selected'));
        
        // Mark new selection
        options[index].classList.add('selected');
        selectedOption = index;
        
        // Enable next button
        nextQuestionBtn.disabled = false;
      }
      
      // Go to next question
      function goToNextQuestion() {
        // If no option selected, do nothing
        if (selectedOption === null && !answeredQuestions[currentQuestion]) return;
        
        // If not answered yet, check answer and update score
        if (!answeredQuestions[currentQuestion]) {
          checkAnswer();
        }
        
        // Move to next question or show results
        if (currentQuestion < quizData.length - 1) {
          currentQuestion++;
          selectedOption = null;
          loadQuestion();
        } else {
          showResults();
        }
      }
      
      // Go to previous question
      function goToPrevQuestion() {
        if (currentQuestion > 0) {
          currentQuestion--;
          loadQuestion();
        }
      }
      
      // Check answer and update score
      function checkAnswer() {
        clearInterval(timerInterval);
        
        const correctAnswerIndex = quizData[currentQuestion].correctAnswer;
        const options = document.querySelectorAll('.option-card');
        
        // Mark as answered
        answeredQuestions[currentQuestion] = true;
        
        // Show correct and incorrect options
        options.forEach((option, index) => {
          if (index === correctAnswerIndex) {
            option.classList.add('correct');
          } else if (index === selectedOption && index !== correctAnswerIndex) {
            option.classList.add('incorrect');
          }
        });
        
        // Update score if correct
        if (selectedOption === correctAnswerIndex) {
          // Base score for correct answer
          const baseScore = 10;
          
          // Calculate time bonus (0-5 points)
          const remainingTimePercent = parseFloat(timerBar.style.width) || 0;
          timeBonus = Math.floor((remainingTimePercent / 100) * 5);
          
          // Update score
          score += baseScore + timeBonus;
          timeBonusTotal += timeBonus;
          
          // Update displays
          scoreDisplay.textContent = score;
          timeBonusDisplay.textContent = `Bonus waktu: +${timeBonus}`;
          
          // Add score animation
          scoreDisplay.classList.add('animate-pulse-fast');
          setTimeout(() => {
            scoreDisplay.classList.remove('animate-pulse-fast');
          }, 1000);
        } else {
          timeBonus = 0;
          timeBonusDisplay.textContent = 'Bonus waktu: +0';
        }
        
        // Disable option selection
        options.forEach(option => {
          option.style.cursor = 'default';
          option.removeEventListener('click', selectOption);
        });
        
        // Update button text if last question
        if (currentQuestion === quizData.length - 1) {
          nextQuestionBtn.innerHTML = `
            <div class="flex items-center">
              <span>Lihat Hasil</span>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.415 1.415l.707-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z" clip-rule="evenodd" />
              </svg>
            </div>
          `;
        }
      }
      
      // Start timer for current question
      function startTimer() {
        // Reset timer bar
        timerBar.style.width = '100%';
        timerBar.classList.remove('timer-bar');
        
        // Force reflow to restart animation
        void timerBar.offsetWidth;
        
        // Start animation
        timerBar.classList.add('timer-bar');
        
        // Set timeout for when time runs out
        timerInterval = setTimeout(() => {
          if (!answeredQuestions[currentQuestion]) {
            // Auto-select nothing and move to next question
            selectedOption = null;
            checkAnswer();
            
            // If not the last question, automatically move to next
            if (currentQuestion < quizData.length - 1) {
              currentQuestion++;
              selectedOption = null;
              loadQuestion();
            } else {
              showResults();
            }
          }
        }, 15000);
      }
      
      // Reset timer
      function resetTimer() {
        clearInterval(timerInterval);
        timerBar.style.width = '100%';
        timerBar.classList.remove('timer-bar');
      }
      
      // Update button states
      function updateButtonStates() {
        // Previous button
        if (currentQuestion > 0) {
          prevQuestionBtn.classList.remove('hidden');
        } else {
          prevQuestionBtn.classList.add('hidden');
        }
        
        // Next button
        if (answeredQuestions[currentQuestion]) {
          nextQuestionBtn.disabled = false;
        } else {
          nextQuestionBtn.disabled = selectedOption === null;
        }
      }
      
      // Show results screen
      function showResults() {
        quizScreen.classList.add('hidden');
        resultsScreen.classList.remove('hidden');
        
        // Calculate correct answers
        const totalCorrect = answeredQuestions.reduce((count, answered, index) => {
          if (answered && quizData[index].correctAnswer === selectedOption) {
            return count + 1;
          }
          return count;
        }, 0);
        
        // Update results display
        finalScore.textContent = score;
        correctAnswers.textContent = totalCorrect;
        timeBonusTotalDisplay.textContent = timeBonusTotal;
        
        // Animate score circle
        const circumference = 2 * Math.PI * 88;
        const offset = circumference - (score / 100) * circumference;
        scoreCircle.style.strokeDashoffset = offset;
        
        // Set performance message
        if (score >= 90) {
          performanceTitle.textContent = "Luar Biasa!";
          performanceMessage.textContent = "Anda memiliki pemahaman yang sangat baik tentang ibadah haji. Pertahankan!";
          createConfetti();
        } else if (score >= 70) {
          performanceTitle.textContent = "Bagus!";
          performanceMessage.textContent = "Anda memiliki pemahaman yang baik tentang ibadah haji. Terus belajar!";
        } else if (score >= 50) {
          performanceTitle.textContent = "Cukup Baik";
          performanceMessage.textContent = "Anda memiliki pemahaman dasar tentang ibadah haji. Pelajari lebih lanjut!";
        } else {
          performanceTitle.textContent = "Perlu Ditingkatkan";
          performanceMessage.textContent = "Anda perlu mempelajari lebih banyak tentang ibadah haji. Jangan menyerah!";
        }
      }
      
      // Create confetti effect for high scores
      function createConfetti() {
        const colors = ['#0090ff', '#ff9a00', '#00c853', '#ff5252', '#aa00ff'];
        const container = document.querySelector('#results-screen');
        
        for (let i = 0; i < 100; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.top = -10 + 'px';
          confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
          
          container.appendChild(confetti);
          
          // Animate falling
          setTimeout(() => {
            confetti.style.transition = 'all ' + (Math.random() * 3 + 2) + 's ease-out';
            confetti.style.transform = 'translateY(' + (Math.random() * 500 + 300) + 'px) rotate(' + Math.random() * 360 + 'deg)';
            confetti.style.opacity = '1';
            
            // Remove after animation
            setTimeout(() => {
              confetti.style.opacity = '0';
              setTimeout(() => {
                confetti.remove();
              }, 1000);
            }, 2000);
          }, 100);
        }
      }
      
      // Reset quiz to start again
      function resetQuiz() {
        // Reset game variables
        currentQuestion = 0;
        score = 0;
        selectedOption = null;
        answeredQuestions = new Array(quizData.length).fill(false);
        timeBonus = 0;
        timeBonusTotal = 0;
        
        // Reset displays
        scoreDisplay.textContent = '0';
        timeBonusDisplay.textContent = 'Bonus waktu: +5';
        nextQuestionBtn.innerHTML = `
          <div class="flex items-center">
            <span>Selanjutnya</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </div>
        `;
        
        // Switch back to quiz screen
        resultsScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        
        // Load first question
        loadQuestion();
      }
      
      // Share results
      function shareResults() {
        const text = `Saya mendapatkan skor ${score}/100 dalam Quiz Pengetahuan Haji! Coba tantang diri Anda!`;
        
        if (navigator.share) {
          navigator.share({
            title: 'Quiz Pengetahuan Haji',
            text: text,
          })
          .catch(error => {
            console.log('Error sharing:', error);
            fallbackShare(text);
          });
        } else {
          fallbackShare(text);
        }
      }
      
      // Fallback share method
      function fallbackShare(text) {
        // Create temporary input
        const input = document.createElement('textarea');
        input.value = text;
        document.body.appendChild(input);
        
        // Select and copy
        input.select();
        document.execCommand('copy');
        document.body.removeChild(input);
        
        // Show copied message
        alert('Teks hasil telah disalin ke clipboard!');
      }
    });
  </script>
</body>
</html>