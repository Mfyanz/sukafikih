<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Evaluasi Haji dan Umrah</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
              950: '#082f49',
            },
          },
          animation: {
            'bounce-once': 'bounce 0.6s ease-in-out 1',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-in': 'slideIn 0.5s ease-in-out',
            'scale-in': 'scaleIn 0.3s ease-in-out',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0', transform: 'translateY(10px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            slideIn: {
              '0%': { opacity: '0', transform: 'translateX(20px)' },
              '100%': { opacity: '1', transform: 'translateX(0)' },
            },
            scaleIn: {
              '0%': { opacity: '0', transform: 'scale(0.95)' },
              '100%': { opacity: '1', transform: 'scale(1)' },
            },
          },
        },
      },
    }
  </script>
  <style>
    @keyframes ripple {
      0% {
        transform: scale(0);
        opacity: 1;
      }
      100% {
        transform: scale(2.5);
        opacity: 0;
      }
    }
    
    .ripple {
      position: relative;
      overflow: hidden;
    }
    
    .ripple-effect {
      position: absolute;
      border-radius: 50%;
      background-color: rgba(255, 255, 255, 0.7);
      animation: ripple 0.6s linear;
      transform: scale(0);
    }
    
    .timer-animation {
      transition: width 1s linear;
    }
    
    .option-selected {
      position: relative;
      overflow: hidden;
    }
    
    .option-selected::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 100%);
      pointer-events: none;
    }
    
    /* Smooth transitions */
    .fade-transition {
      transition: all 0.3s ease;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #94a3b8;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #64748b;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen font-sans text-slate-800">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-primary-800 mb-2">Evaluasi Pembelajaran Haji dan Umrah</h1>
      <p class="text-slate-600">Uji pemahaman Anda tentang ibadah Haji dan Umrah</p>
    </header>
    
    <!-- Start Screen -->
    <div id="start-screen" class="bg-white rounded-2xl shadow-xl overflow-hidden animate-fade-in">
      <div class="bg-gradient-to-r from-primary-600 to-primary-800 px-6 py-8 text-white">
        <h2 class="text-2xl font-bold mb-2">Selamat Datang di Quiz Evaluasi</h2>
        <p class="opacity-90">Siap untuk menguji pengetahuan Anda tentang Haji dan Umrah?</p>
      </div>
      <div class="p-6 md:p-8">
        <div class="flex flex-col md:flex-row items-center gap-6 mb-8">
          <div class="bg-primary-50 p-4 rounded-xl flex items-center gap-3 w-full md:w-auto">
            <div class="bg-primary-100 p-3 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-slate-700">Jumlah Soal</h3>
              <p class="text-lg font-semibold text-primary-700">15 Pertanyaan</p>
            </div>
          </div>
          
          <div class="bg-primary-50 p-4 rounded-xl flex items-center gap-3 w-full md:w-auto">
            <div class="bg-primary-100 p-3 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-slate-700">Waktu</h3>
              <p class="text-lg font-semibold text-primary-700">15 Menit</p>
            </div>
          </div>
          
          <div class="bg-primary-50 p-4 rounded-xl flex items-center gap-3 w-full md:w-auto">
            <div class="bg-primary-100 p-3 rounded-full">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="font-medium text-slate-700">Nilai Lulus</h3>
              <p class="text-lg font-semibold text-primary-700">70%</p>
            </div>
          </div>
        </div>
        
        <div class="bg-amber-50 border border-amber-200 rounded-lg p-4 mb-8">
          <h3 class="font-semibold text-amber-800 mb-2 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Petunjuk
          </h3>
          <ul class="text-amber-700 space-y-2 pl-6 list-disc">
            <li>Quiz ini terdiri dari 15 pertanyaan pilihan ganda</li>
            <li>Anda memiliki waktu 15 menit untuk menyelesaikan quiz</li>
            <li>Setiap pertanyaan bernilai 1 poin</li>
            <li>Hasil dan jawaban benar akan ditampilkan setelah quiz selesai</li>
            <li>Jawablah dengan jujur dan teliti</li>
          </ul>
        </div>
        
        <button id="start-button" class="w-full py-4 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2 group">
          Mulai Quiz
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Quiz Screen -->
    <div id="quiz-screen" class="hidden">
      <!-- Timer and Progress Bar -->
      <div class="bg-white rounded-2xl shadow-lg p-4 mb-6 animate-fade-in">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4 mb-4">
          <div class="flex items-center gap-3 bg-primary-50 px-4 py-2 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div class="font-medium text-primary-800">Waktu: <span id="timer" class="font-bold">15:00</span></div>
          </div>
          
          <div class="flex items-center gap-3">
            <div class="text-sm text-slate-600">Pertanyaan</div>
            <div class="bg-primary-100 text-primary-800 font-bold px-3 py-1 rounded-md">
              <span id="current-question">1</span>/<span id="total-questions">15</span>
            </div>
          </div>
          
          <div class="flex items-center gap-3 bg-emerald-50 px-4 py-2 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <div class="font-medium text-emerald-800">Skor: <span id="current-score" class="font-bold">0</span></div>
          </div>
        </div>
        
        <div class="w-full bg-slate-200 rounded-full h-2.5 overflow-hidden">
          <div id="progress-bar" class="bg-primary-600 h-2.5 rounded-full timer-animation" style="width: 0%"></div>
        </div>
      </div>
      
      <!-- Question Card -->
      <div class="bg-white rounded-2xl shadow-lg overflow-hidden mb-6 animate-fade-in">
        <div class="bg-gradient-to-r from-primary-600 to-primary-800 p-6">
          <h2 id="question-text" class="text-xl md:text-2xl font-semibold text-white"></h2>
        </div>
        
        <div id="options-container" class="p-6 space-y-3">
          <!-- Options will be inserted here by JavaScript -->
        </div>
      </div>
      
      <!-- Navigation Buttons -->
      <div class="flex justify-between gap-4 animate-fade-in">
        <button id="prev-button" class="px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-medium rounded-xl transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          Sebelumnya
        </button>
        
        <button id="next-button" class="px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2">
          <span id="next-button-text">Selanjutnya</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="hidden">
      <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8 animate-fade-in">
        <div class="bg-gradient-to-r from-primary-600 to-primary-800 px-6 py-8 text-white text-center">
          <h2 class="text-2xl font-bold mb-2">Hasil Evaluasi</h2>
          <p class="opacity-90">Berikut adalah hasil evaluasi pembelajaran Anda</p>
        </div>
        
        <div class="p-6 md:p-8">
          <!-- Score Summary -->
          <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
            <!-- Score Circle -->
            <div class="relative w-48 h-48">
              <svg class="w-full h-full" viewBox="0 0 100 100">
                <circle class="text-slate-100" stroke-width="10" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50"></circle>
                <circle id="score-circle" class="text-primary-500 transition-all duration-1000 ease-out" stroke-width="10" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50" stroke-dasharray="0 251.2" stroke-dashoffset="0" stroke-linecap="round" transform="rotate(-90 50 50)"></circle>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="percentage-score" class="text-4xl font-bold text-primary-700">0%</span>
                <span class="text-slate-500">Nilai Anda</span>
              </div>
            </div>
            
            <!-- Score Details -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-emerald-50 p-4 rounded-xl flex items-center gap-3">
                <div class="bg-emerald-100 p-3 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                <div>
                  <h3 class="font-medium text-slate-700">Jawaban Benar</h3>
                  <p id="correct-answers" class="text-lg font-semibold text-emerald-700">0</p>
                </div>
              </div>
              
              <div class="bg-rose-50 p-4 rounded-xl flex items-center gap-3">
                <div class="bg-rose-100 p-3 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-rose-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </div>
                <div>
                  <h3 class="font-medium text-slate-700">Jawaban Salah</h3>
                  <p id="wrong-answers" class="text-lg font-semibold text-rose-700">0</p>
                </div>
              </div>
              
              <div class="bg-amber-50 p-4 rounded-xl flex items-center gap-3">
                <div class="bg-amber-100 p-3 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <h3 class="font-medium text-slate-700">Waktu</h3>
                  <p id="time-spent" class="text-lg font-semibold text-amber-700">00:00</p>
                </div>
              </div>
              
              <div class="bg-blue-50 p-4 rounded-xl flex items-center gap-3">
                <div class="bg-blue-100 p-3 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                  </svg>
                </div>
                <div>
                  <h3 class="font-medium text-slate-700">Status</h3>
                  <p id="pass-status" class="text-lg font-semibold text-blue-700">-</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 mb-8">
            <button id="share-button" class="flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
              </svg>
              Bagikan Hasil
            </button>
            
            <button id="review-button" class="flex-1 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
              Lihat Jawaban
            </button>
            
            <button id="retry-button" class="flex-1 py-3 bg-slate-600 hover:bg-slate-700 text-white font-medium rounded-xl shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
              </svg>
              Coba Lagi
            </button>
          </div>
        </div>
      </div>
      
      <!-- Answer Review Section -->
      <div id="answer-review" class="bg-white rounded-2xl shadow-xl overflow-hidden mb-8 animate-fade-in hidden">
        <div class="bg-gradient-to-r from-primary-700 to-primary-900 px-6 py-6 text-white">
          <h2 class="text-xl font-bold">Pembahasan Jawaban</h2>
          <p class="opacity-90 text-sm">Berikut adalah jawaban yang benar untuk setiap pertanyaan</p>
        </div>
        
        <div id="review-container" class="p-6 divide-y divide-slate-200">
          <!-- Review items will be inserted here by JavaScript -->
        </div>
      </div>
    </div>
    
    <!-- Share Dialog -->
    <div id="share-dialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden backdrop-blur-sm">
      <div class="bg-white rounded-xl max-w-md w-full mx-4 shadow-2xl transform transition-all duration-300 scale-100 p-6">
        <h3 class="text-xl font-medium mb-4 text-slate-800">Bagikan Hasil</h3>
        <p class="text-slate-600 mb-6">Bagikan hasil evaluasi pembelajaran Haji dan Umrah Anda melalui:</p>
        
        <div class="grid grid-cols-2 gap-4 mb-6">
          <button id="whatsapp-share" class="flex flex-col items-center justify-center gap-2 p-4 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 rounded-xl transition-all duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            <span class="font-medium">WhatsApp</span>
          </button>
          
          <button id="copy-result" class="flex flex-col items-center justify-center gap-2 p-4 bg-blue-50 hover:bg-blue-100 text-blue-800 rounded-xl transition-all duration-200">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
            </svg>
            <span class="font-medium">Salin Hasil</span>
          </button>
        </div>
        
        <div class="flex justify-end gap-3 mt-6">
          <button id="cancel-share" class="px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-lg transition-all duration-200">
            Tutup
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Quiz questions
    const questions = [
      {
        id: 1,
        question: "Apa hukum melaksanakan ibadah haji bagi yang mampu?",
        options: [
          { id: "a", text: "Wajib" },
          { id: "b", text: "Sunnah" },
          { id: "c", text: "Mubah" },
          { id: "d", text: "Makruh" },
        ],
        correctAnswer: "a",
        explanation: "Hukum melaksanakan ibadah haji bagi yang mampu adalah wajib. Ini berdasarkan firman Allah dalam QS. Ali Imran ayat 97."
      },
      {
        id: 2,
        question: "Kapan waktu pelaksanaan ibadah haji?",
        options: [
          { id: "a", text: "Bulan Ramadhan" },
          { id: "b", text: "Bulan Syawal sampai 10 Dzulhijjah" },
          { id: "c", text: "Sepanjang tahun" },
          { id: "d", text: "Bulan Muharram" },
        ],
        correctAnswer: "b",
        explanation: "Waktu pelaksanaan ibadah haji adalah pada bulan-bulan haji yaitu Syawal, Dzulqa'dah, dan 10 hari pertama bulan Dzulhijjah."
      },
      {
        id: 3,
        question: "Apa perbedaan utama antara haji dan umrah?",
        options: [
          { id: "a", text: "Haji hanya dapat dilakukan di Makkah, umrah di Madinah" },
          { id: "b", text: "Umrah wajib, haji sunnah" },
          { id: "c", text: "Haji memiliki waktu tertentu, umrah dapat dilakukan kapan saja" },
          { id: "d", text: "Tidak ada perbedaan antara keduanya" },
        ],
        correctAnswer: "c",
        explanation: "Perbedaan utama antara haji dan umrah adalah waktu pelaksanaannya. Haji hanya dapat dilakukan pada waktu tertentu (bulan-bulan haji), sedangkan umrah dapat dilakukan kapan saja sepanjang tahun."
      },
      {
        id: 4,
        question: "Apa yang dimaksud dengan wukuf?",
        options: [
          { id: "a", text: "Berdiam diri di Masjidil Haram" },
          { id: "b", text: "Berdiam diri di Arafah pada 9 Dzulhijjah" },
          { id: "c", text: "Berlari kecil antara Shafa dan Marwah" },
          { id: "d", text: "Melempar jumrah" },
        ],
        correctAnswer: "b",
        explanation: "Wukuf adalah berdiam diri di padang Arafah pada tanggal 9 Dzulhijjah, mulai dari tergelincirnya matahari hingga terbenamnya matahari. Wukuf merupakan rukun haji yang paling utama."
      },
      {
        id: 5,
        question: "Berapa kali tawaf yang dilakukan dalam ibadah haji?",
        options: [
          { id: "a", text: "3 kali" },
          { id: "b", text: "5 kali" },
          { id: "c", text: "7 kali" },
          { id: "d", text: "9 kali" },
        ],
        correctAnswer: "c",
        explanation: "Tawaf dalam ibadah haji dilakukan sebanyak 7 kali mengelilingi Ka'bah dengan posisi Ka'bah berada di sebelah kiri dan dimulai dari Hajar Aswad."
      },
      {
        id: 6,
        question: "Apa yang dimaksud dengan sa'i?",
        options: [
          { id: "a", text: "Berjalan mengelilingi Ka'bah" },
          { id: "b", text: "Berlari kecil antara bukit Shafa dan Marwah" },
          { id: "c", text: "Melempar jumrah" },
          { id: "d", text: "Berdiam diri di Arafah" },
        ],
        correctAnswer: "b",
        explanation: "Sa'i adalah berjalan atau berlari-lari kecil antara bukit Shafa dan Marwah sebanyak 7 kali. Sa'i dimulai dari bukit Shafa dan berakhir di bukit Marwah."
      },
      {
        id: 7,
        question: "Apa rukun umrah yang benar?",
        options: [
          { id: "a", text: "Ihram, Tawaf, Sa'i, Tahallul" },
          { id: "b", text: "Ihram, Wukuf, Tawaf, Sa'i, Tahallul" },
          { id: "c", text: "Ihram, Tawaf, Tahallul" },
          { id: "d", text: "Ihram, Sa'i, Tahallul" },
        ],
        correctAnswer: "a",
        explanation: "Rukun umrah ada empat yaitu: Ihram (niat), Tawaf (mengelilingi Ka'bah), Sa'i (berlari kecil antara Shafa dan Marwah), dan Tahallul (mencukur atau memotong rambut)."
      },
      {
        id: 8,
        question: "Apa yang dimaksud dengan ihram?",
        options: [
          { id: "a", text: "Pakaian khusus untuk ibadah haji dan umrah" },
          { id: "b", text: "Niat dan memakai pakaian ihram" },
          { id: "c", text: "Mencukur rambut setelah selesai ibadah" },
          { id: "d", text: "Berdoa di Masjidil Haram" },
        ],
        correctAnswer: "b",
        explanation: "Ihram adalah niat untuk memulai ibadah haji atau umrah dan memakai pakaian ihram. Pakaian ihram untuk laki-laki berupa dua helai kain putih tidak berjahit, sedangkan untuk perempuan berupa pakaian yang menutup seluruh tubuh kecuali wajah dan telapak tangan."
      },
      {
        id: 9,
        question: "Apa yang dimaksud dengan tahallul?",
        options: [
          { id: "a", text: "Niat memulai ibadah haji atau umrah" },
          { id: "b", text: "Berjalan mengelilingi Ka'bah" },
          { id: "c", text: "Berlari kecil antara Shafa dan Marwah" },
          { id: "d", text: "Mencukur atau memotong rambut sebagai tanda selesainya ibadah" },
        ],
        correctAnswer: "d",
        explanation: "Tahallul adalah mencukur atau memotong rambut sebagai tanda selesainya ibadah haji atau umrah. Dengan tahallul, larangan-larangan selama ihram menjadi halal kembali."
      },
      {
        id: 10,
        question: "Apa hukuman bagi yang melanggar larangan ihram?",
        options: [
          { id: "a", text: "Tidak ada hukuman" },
          { id: "b", text: "Membayar dam (denda)" },
          { id: "c", text: "Haji atau umrahnya batal" },
          { id: "d", text: "Dilarang masuk Makkah" },
        ],
        correctAnswer: "b",
        explanation: "Hukuman bagi yang melanggar larangan ihram adalah membayar dam (denda). Besarnya dam tergantung pada jenis pelanggaran yang dilakukan."
      },
      {
        id: 11,
        question: "Apa yang dimaksud dengan Miqat?",
        options: [
          { id: "a", text: "Tempat bersuci sebelum melaksanakan ibadah haji" },
          { id: "b", text: "Tempat memulai ihram" },
          { id: "c", text: "Tempat bermalam di Mina" },
          { id: "d", text: "Tempat melempar jumrah" },
        ],
        correctAnswer: "b",
        explanation: "Miqat adalah tempat atau batas dimana jamaah haji atau umrah harus sudah berniat ihram. Ada miqat makani (tempat) dan miqat zamani (waktu)."
      },
      {
        id: 12,
        question: "Apa yang dimaksud dengan Tawaf Ifadah?",
        options: [
          { id: "a", text: "Tawaf yang dilakukan saat pertama kali tiba di Makkah" },
          { id: "b", text: "Tawaf perpisahan sebelum meninggalkan Makkah" },
          { id: "c", text: "Tawaf yang dilakukan setelah wukuf di Arafah" },
          { id: "d", text: "Tawaf sunnah yang boleh dilakukan kapan saja" },
        ],
        correctAnswer: "c",
        explanation: "Tawaf Ifadah adalah tawaf yang dilakukan setelah wukuf di Arafah dan merupakan salah satu rukun haji. Tawaf ini dilakukan pada tanggal 10 Dzulhijjah atau hari-hari tasyriq."
      },
      {
        id: 13,
        question: "Apa yang dimaksud dengan Hari Tarwiyah?",
        options: [
          { id: "a", text: "Hari ke-8 Dzulhijjah" },
          { id: "b", text: "Hari ke-9 Dzulhijjah" },
          { id: "c", text: "Hari ke-10 Dzulhijjah" },
          { id: "d", text: "Hari ke-11 Dzulhijjah" },
        ],
        correctAnswer: "a",
        explanation: "Hari Tarwiyah adalah hari ke-8 Dzulhijjah, dimana jamaah haji bersiap-siap untuk melaksanakan wukuf dengan berangkat ke Mina. Kata 'tarwiyah' berarti menyiapkan air, karena pada zaman dahulu jamaah haji menyiapkan air untuk dibawa ke Arafah."
      },
      {
        id: 14,
        question: "Apa yang dimaksud dengan Hari Tasyriq?",
        options: [
          { id: "a", text: "Tanggal 8, 9, dan 10 Dzulhijjah" },
          { id: "b", text: "Tanggal 9, 10, dan 11 Dzulhijjah" },
          { id: "c", text: "Tanggal 10, 11, dan 12 Dzulhijjah" },
          { id: "d", text: "Tanggal 11, 12, dan 13 Dzulhijjah" },
        ],
        correctAnswer: "d",
        explanation: "Hari Tasyriq adalah tanggal 11, 12, dan 13 Dzulhijjah. Pada hari-hari ini, jamaah haji melakukan pelemparan jumrah dan bermalam di Mina."
      },
      {
        id: 15,
        question: "Apa hikmah dari ibadah haji dan umrah?",
        options: [
          { id: "a", text: "Hanya untuk mendapatkan gelar haji" },
          { id: "b", text: "Untuk berwisata ke luar negeri" },
          { id: "c", text: "Untuk meningkatkan status sosial" },
          { id: "d", text: "Untuk meningkatkan ketakwaan dan persaudaraan umat Islam" },
        ],
        correctAnswer: "d",
        explanation: "Hikmah dari ibadah haji dan umrah antara lain untuk meningkatkan ketakwaan kepada Allah SWT, mempererat persaudaraan umat Islam dari berbagai penjuru dunia, melatih kesabaran dan ketabahan, serta mengingatkan akan persamaan derajat manusia di hadapan Allah SWT."
      }
    ];

    // Quiz state
    let currentQuestionIndex = 0;
    let selectedAnswers = {};
    let timeLeft = 15 * 60; // 15 minutes in seconds
    let timerInterval;
    let quizStarted = false;
    let quizFinished = false;
    let startTime;

    // DOM elements
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const answerReview = document.getElementById('answer-review');
    const shareDialog = document.getElementById('share-dialog');
    
    const startButton = document.getElementById('start-button');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');
    const nextButtonText = document.getElementById('next-button-text');
    const shareButton = document.getElementById('share-button');
    const reviewButton = document.getElementById('review-button');
    const retryButton = document.getElementById('retry-button');
    const cancelShareButton = document.getElementById('cancel-share');
    const whatsappShareButton = document.getElementById('whatsapp-share');
    const copyResultButton = document.getElementById('copy-result');
    
    const totalQuestionsSpan = document.getElementById('total-questions');
    const currentQuestionSpan = document.getElementById('current-question');
    const questionTextElement = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const timerElement = document.getElementById('timer');
    const progressBar = document.getElementById('progress-bar');
    const currentScoreSpan = document.getElementById('current-score');
    
    const percentageScoreSpan = document.getElementById('percentage-score');
    const correctAnswersSpan = document.getElementById('correct-answers');
    const wrongAnswersSpan = document.getElementById('wrong-answers');
    const timeSpentSpan = document.getElementById('time-spent');
    const passStatusSpan = document.getElementById('pass-status');
    const scoreCircle = document.getElementById('score-circle');
    const reviewContainer = document.getElementById('review-container');

    // Initialize
    function init() {
      totalQuestionsSpan.textContent = questions.length;
      
      // Event listeners
      startButton.addEventListener('click', startQuiz);
      prevButton.addEventListener('click', handlePrevQuestion);
      nextButton.addEventListener('click', handleNextQuestion);
      shareButton.addEventListener('click', () => shareDialog.classList.remove('hidden'));
      reviewButton.addEventListener('click', toggleReviewSection);
      retryButton.addEventListener('click', handleRetry);
      cancelShareButton.addEventListener('click', () => shareDialog.classList.add('hidden'));
      whatsappShareButton.addEventListener('click', handleShareWhatsApp);
      copyResultButton.addEventListener('click', handleCopyResult);
      
      // Add ripple effect to buttons
      document.querySelectorAll('button').forEach(button => {
        button.addEventListener('click', createRipple);
      });
    }

    // Create ripple effect
    function createRipple(event) {
      const button = event.currentTarget;
      
      if (!button.classList.contains('ripple')) return;
      
      const circle = document.createElement('span');
      const diameter = Math.max(button.clientWidth, button.clientHeight);
      const radius = diameter / 2;
      
      circle.style.width = circle.style.height = `${diameter}px`;
      circle.style.left = `${event.clientX - button.getBoundingClientRect().left - radius}px`;
      circle.style.top = `${event.clientY - button.getBoundingClientRect().top - radius}px`;
      circle.classList.add('ripple-effect');
      
      const ripple = button.getElementsByClassName('ripple-effect')[0];
      
      if (ripple) {
        ripple.remove();
      }
      
      button.appendChild(circle);
    }

    // Start quiz
    function startQuiz() {
      quizStarted = true;
      startTime = new Date();
      
      startScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      
      // Start timer
      startTimer();
      
      // Load first question
      loadQuestion();
    }

    // Load question
    function loadQuestion() {
      const question = questions[currentQuestionIndex];
      
      // Update question number and text
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
      questionTextElement.textContent = question.question;
      
      // Update progress bar
      const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
      progressBar.style.width = `${progress}%`;
      
      // Clear options container
      optionsContainer.innerHTML = '';
      
      // Add options
      question.options.forEach((option, index) => {
        const isSelected = selectedAnswers[question.id] === option.id;
        const optionElement = document.createElement('div');
        optionElement.className = `p-3 border-2 rounded-lg cursor-pointer transition-all duration-200 ${isSelected ? 'border-primary-500 bg-primary-50 option-selected' : 'border-slate-200 hover:border-primary-300 hover:bg-primary-50'} animate-fade-in`;
        optionElement.style.animationDelay = `${index * 0.1}s`;
        optionElement.innerHTML = `
          <div class="flex items-center gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full ${isSelected ? 'bg-primary-500 text-white' : 'bg-slate-100 text-slate-700'} flex items-center justify-center font-medium">
              ${option.id.toUpperCase()}
            </div>
            <div class="flex-grow">${option.text}</div>
          </div>
        `;
        
        optionElement.addEventListener('click', () => {
          // Select this option
          selectedAnswers[question.id] = option.id;
          
          // Update UI
          loadQuestion();
          
          // Update score
          updateScore();
        });
        
        optionsContainer.appendChild(optionElement);
      });
      
      // Update button text
      nextButtonText.textContent = currentQuestionIndex === questions.length - 1 ? 'Selesai' : 'Selanjutnya';
      
      // Update prev button state
      prevButton.disabled = currentQuestionIndex === 0;
    }

    // Handle next question
    function handleNextQuestion() {
      if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
      } else {
        finishQuiz();
      }
    }

    // Handle previous question
    function handlePrevQuestion() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
      }
    }

    // Start timer
    function startTimer() {
      updateTimerDisplay();
      
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          finishQuiz();
        }
      }, 1000);
    }

    // Update timer display
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      // Add warning class when time is running low
      if (timeLeft <= 60) {
        timerElement.classList.add('text-rose-600');
        timerElement.parentElement.classList.add('animate-pulse');
      }
    }

    // Update score
    function updateScore() {
      const score = calculateScore();
      currentScoreSpan.textContent = score;
    }

    // Calculate score
    function calculateScore() {
      let score = 0;
      questions.forEach(question => {
        if (selectedAnswers[question.id] === question.correctAnswer) {
          score++;
        }
      });
      return score;
    }

    // Finish quiz
    function finishQuiz() {
      quizFinished = true;
      clearInterval(timerInterval);
      
      const endTime = new Date();
      const timeSpent = Math.floor((endTime - startTime) / 1000);
      const minutes = Math.floor(timeSpent / 60);
      const seconds = timeSpent % 60;
      
      quizScreen.classList.add('hidden');
      resultsScreen.classList.remove('hidden');
      
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const wrong = questions.length - score;
      
      // Update results UI
      percentageScoreSpan.textContent = `${percentage}%`;
      correctAnswersSpan.textContent = score;
      wrongAnswersSpan.textContent = wrong;
      timeSpentSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      // Determine pass status
      if (percentage >= 70) {
        passStatusSpan.textContent = 'Lulus';
        passStatusSpan.classList.add('text-emerald-600');
      } else {
        passStatusSpan.textContent = 'Belum Lulus';
        passStatusSpan.classList.add('text-rose-600');
      }
      
      // Animate score circle
      setTimeout(() => {
        scoreCircle.style.strokeDasharray = `${(percentage / 100) * 251.2} 251.2`;
      }, 500);
      
      // Populate review section
      populateReviewSection();
    }

    // Populate review section
    function populateReviewSection() {
      reviewContainer.innerHTML = '';
      
      questions.forEach((question, index) => {
        const userAnswer = selectedAnswers[question.id] || '';
        const isCorrect = userAnswer === question.correctAnswer;
        
        const reviewItem = document.createElement('div');
        reviewItem.className = 'py-4 animate-fade-in';
        reviewItem.style.animationDelay = `${index * 0.1}s`;
        
        reviewItem.innerHTML = `
          <div class="flex items-start gap-3 mb-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full ${isCorrect ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'} flex items-center justify-center font-medium mt-1">
              ${index + 1}
            </div>
            <div class="flex-grow">
              <h3 class="font-medium text-slate-800 mb-2">${question.question}</h3>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                ${question.options.map(option => {
                  let optionClass = 'border rounded-lg p-2 flex items-center gap-2';
                  
                  if (option.id === question.correctAnswer) {
                    optionClass += ' bg-emerald-50 border-emerald-200 text-emerald-800';
                  } else if (option.id === userAnswer && option.id !== question.correctAnswer) {
                    optionClass += ' bg-rose-50 border-rose-200 text-rose-800';
                  } else {
                    optionClass += ' border-slate-200 text-slate-600';
                  }
                  
                  return `
                    <div class="${optionClass}">
                      <div class="w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center font-medium ${option.id === question.correctAnswer ? 'bg-emerald-200 text-emerald-800' : (option.id === userAnswer && option.id !== question.correctAnswer ? 'bg-rose-200 text-rose-800' : 'bg-slate-200 text-slate-700')}">
                        ${option.id.toUpperCase()}
                      </div>
                      <span>${option.text}</span>
                      ${option.id === question.correctAnswer ? '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-auto text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>' : ''}
                    </div>
                  `;
                }).join('')}
              </div>
              
              <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 text-amber-800">
                <div class="font-medium mb-1 flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  Penjelasan:
                </div>
                <p>${question.explanation}</p>
              </div>
            </div>
          </div>
        `;
        
        reviewContainer.appendChild(reviewItem);
      });
    }

    // Toggle review section
    function toggleReviewSection() {
      answerReview.classList.toggle('hidden');
      
      if (!answerReview.classList.contains('hidden')) {
        answerReview.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Handle share to WhatsApp
    function handleShareWhatsApp() {
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const passStatus = percentage >= 70 ? 'Lulus' : 'Belum Lulus';
      
      const text = `Saya baru saja menyelesaikan Quiz Evaluasi Haji dan Umrah dengan skor ${score}/${questions.length} (${percentage}%). Status: ${passStatus}`;
      const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
      
      window.open(url, "_blank");
      shareDialog.classList.add('hidden');
    }

    // Handle copy result
    function handleCopyResult() {
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const passStatus = percentage >= 70 ? 'Lulus' : 'Belum Lulus';
      
      const text = `Quiz Evaluasi Haji dan Umrah\nSkor: ${score}/${questions.length} (${percentage}%)\nStatus: ${passStatus}`;
      
      navigator.clipboard.writeText(text).then(() => {
        copyResultButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          <span class="font-medium">Tersalin!</span>
        `;
        
        setTimeout(() => {
          copyResultButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
            </svg>
            <span class="font-medium">Salin Hasil</span>
          `;
        }, 2000);
      });
      
      shareDialog.classList.add('hidden');
    }

    // Handle retry
    function handleRetry() {
      // Reset quiz state
      currentQuestionIndex = 0;
      selectedAnswers = {};
      timeLeft = 15 * 60;
      quizStarted = false;
      quizFinished = false;
      
      // Reset UI
      resultsScreen.classList.add('hidden');
      answerReview.classList.add('hidden');
      startScreen.classList.remove('hidden');
      
      // Reset timer display
      timerElement.classList.remove('text-rose-600');
      timerElement.parentElement.classList.remove('animate-pulse');
    }

    // Initialize the app
    init();
  </script>
</body>
</html>