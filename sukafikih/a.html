<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale: 1.0">
    <title>Evaluasi Haji dan Umrah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #1e3a8a, #ffffff, #1e3a8a);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            padding: 0;
            color: #333;
        }

        .container {
            background: #fff;
            border-radius: 20px;
            overflow: hidden;
            width: 100%;
            max-width: 1000px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .header {
            background-color: #1e3a8a;
            text-align: center;
            padding: 30px 0;
        }

        .header h1 {
            font-size: 2.5rem;
            color: white;
        }

        .name-input-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 50px;
        }

        .name-input-container input {
            padding: 10px;
            font-size: 1.2rem;
            margin-bottom: 20px;
            border-radius: 10px;
            border: 2px solid #1e3a8a;
            width: 60%;
        }

        .start-button {
            padding: 12px 20px;
            background-color: #1e3a8a;
            color: white;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
        }

        .start-button:hover {
            background-color: #2563eb;
        }

        .quiz-container {
            padding: 30px;
            display: none;
        }

        .question {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-button {
            padding: 15px 20px;
            background-color: #1e3a8a;
            color: white;
            font-size: 1.1rem;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .option-button:hover {
            background-color: #2563eb;
            transform: translateY(-3px);
        }

        .option-button:active {
            background-color: #1d4ed8;
            transform: translateY(2px);
        }

        .timer {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }

        .progress-map {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            margin-bottom: 40px;
        }

        .progress-circle {
            width: 40px;
            height: 40px;
            background-color: #fff;
            border-radius: 50%;
            border: 2px solid #1e3a8a;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #1e3a8a;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .progress-circle.completed {
            background-color: #1e3a8a;
            color: #fff;
        }

        .result-card {
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            display: none;
            text-align: center;
        }

        .result-card h3 {
            font-size: 2rem;
            color: #1e3a8a;
        }

        .result-card p {
            font-size: 1.2rem;
            color: #333;
        }

        .restart-button {
            padding: 12px 20px;
            background-color: #1e3a8a;
            color: white;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
        }

        .restart-button:hover {
            background-color: #2563eb;
        }

        .leaderboard {
            display: none;
            padding: 20px;
            text-align: center;
        }

        .leaderboard h2 {
            font-size: 1.5rem;
            color: #1e3a8a;
            margin-bottom: 20px;
        }

        .leaderboard .table {
            width: 100%;
            border-radius: 10px;
            border-collapse: collapse;
        }

        .leaderboard .table th, .leaderboard .table td {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .leaderboard .table th {
            background-color: #1e3a8a;
            color: #fff;
        }

        .leaderboard .table .rank {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .leaderboard .table .name, .leaderboard .table .score {
            font-size: 1rem;
        }

        .leaderboard .table .empty {
            font-style: italic;
            color: #ccc;
        }

        .leaderboard .table img {
            width: 20px;
            height: 20px;
        }

        .exit-button {
            padding: 12px 20px;
            background-color: #e11d48;
            color: white;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
            margin-top: 20px;
        }

        .exit-button:hover {
            background-color: #be123c;
        }

    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>Evaluasi Haji dan Umrah</h1>
        </div>

        <!-- Name Input Section -->
        <div id="name-input-container" class="name-input-container">
            <h2>Masukkan Nama Anda</h2>
            <input type="text" id="user-name" placeholder="Nama Anda" />
            <button class="start-button" onclick="startQuiz()">Mulai Kuis</button>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="quiz-container">
            <div id="timer" class="timer"></div>
            <div id="progress-map" class="progress-map"></div>
            <div id="question-container"></div>
        </div>

        <!-- Result Card -->
        <div id="result-container" class="result-card">
            <h3>Evaluasi Selesai!</h3>
            <p id="score-message"></p>
            <button class="restart-button" onclick="restartQuiz()">Mulai Lagi</button>
            <button class="restart-button" onclick="viewLeaderboard()">Lihat Peringkat</button>
        </div>

        <!-- Leaderboard -->
        <div id="leaderboard" class="leaderboard">
            <h2>Peringkat Global</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>Peringkat</th>
                        <th>Nama</th>
                        <th>Skor</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-list">
                    <!-- Peringkat user akan ditampilkan di sini -->
                </tbody>
            </table>
            <button class="exit-button" onclick="exitGame()">Keluar dari Game</button>
        </div>
    </div>

    <script>
        const questions = [
            { question: "Apa saja rukun haji?", options: ["Ihram, wukuf di Arafah, thawaf ifadah, sai, tahallul, tertib", "Ihram, mabit di Muzdalifah, melontar jumrah", "Shalat, zakat, puasa, haji", "Thawaf qudum, mabit di Mina, dam"], correct: 0 },
            { question: "Apa perbedaan haji dan umrah?", options: ["Haji wajib, umrah sunnah", "Haji dilakukan pada waktu tertentu, umrah kapan saja", "Haji hanya thawaf, umrah hanya sai", "Haji tanpa dam, umrah dengan dam"], correct: 1 },
            { question: "Apa yang dimaksud dengan ihram dalam ibadah haji?", options: ["Pakaian khusus yang dikenakan saat haji", "Mandi besar sebelum berangkat ke Mekah", "Menahan diri dari hal-hal tertentu saat haji", "Perjalanan menuju tanah suci"], correct: 2 },
            { question: "Apa itu wukuf di Arafah?", options: ["Shalat di masjid Arafah", "Menginap di tenda di Arafah", "Berdoa dan memohon ampunan di Arafah", "Melempar jumrah"], correct: 2 },
            { question: "Apa yang dimaksud dengan thawaf ifadah?", options: ["Thawaf pertama kali setelah tiba di Makkah", "Thawaf yang dilakukan setelah wukuf di Arafah", "Thawaf untuk melambangkan ketaatan kepada Allah", "Thawaf saat tiba di Madinah"], correct: 1 },
            { question: "Berapa kali jumlah sai dalam ibadah haji?", options: ["5 kali", "7 kali", "3 kali", "9 kali"], correct: 1 },
            { question: "Apa itu tahallul?", options: ["Memotong rambut setelah selesai haji", "Membuang batu jumrah", "Bersujud di tempat tertentu", "Membaca talbiyah"], correct: 0 },
            { question: "Kapan haji diwajibkan bagi seorang Muslim?", options: ["Setelah menikah", "Setelah mampu secara finansial dan fisik", "Saat berusia 50 tahun", "Saat memiliki anak"], correct: 1 },
            { question: "Apa yang dimaksud dengan dam dalam ibadah haji?", options: ["Denda yang harus dibayar jika melakukan pelanggaran", "Sewa hewan kurban", "Zakat harta haji", "Proses mencuci pakaian haji"], correct: 0 },
            { question: "Apa itu umrah?", options: ["Ibadah haji di luar musim haji", "Ibadah yang lebih singkat dibandingkan haji", "Menjalankan seluruh rukun haji", "Perjalanan spiritual ke Madinah"], correct: 1 },
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let timer = 60; // Time limit in seconds
        let timerInterval;
        const leaderboard = [];

        let userName = "";

        // Start Quiz after Name input
        function startQuiz() {
            userName = document.getElementById("user-name").value.trim();
            if (userName === "") {
                alert("Silakan masukkan nama Anda");
                return;
            }

            document.getElementById("name-input-container").style.display = "none";
            document.getElementById("quiz-container").style.display = "block";
            startTimer();
            displayQuestion();
        }

        // Display Question and Options
        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            const questionContainer = document.getElementById("question-container");
            questionContainer.innerHTML = `
                <div class="question">${question.question}</div>
                <div class="options-container">
                    ${question.options.map((option, index) => {
                        return `
                            <button class="option-button" onclick="checkAnswer(${index}, ${question.correct})">${option}</button>
                        `;
                    }).join('')}
                </div>
            `;
            updateProgressMap();
        }

        // Check Answer
        function checkAnswer(selectedIndex, correctIndex) {
            const buttons = document.querySelectorAll(".option-button");
            if (selectedIndex === correctIndex) {
                score += 5;
                buttons[selectedIndex].style.backgroundColor = "#22c55e"; // Green for correct
            } else {
                buttons[selectedIndex].style.backgroundColor = "#ef4444"; // Red for incorrect
                buttons[correctIndex].style.backgroundColor = "#22c55e"; // Green for correct
            }

            setTimeout(nextQuestion, 1000);
        }

        // Next Question
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                displayQuestion();
            } else {
                endQuiz();
            }
        }

        // Start Timer
        function startTimer() {
            timerInterval = setInterval(function () {
                document.getElementById("timer").textContent = `Waktu: ${timer} detik`;
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    endQuiz();
                } else {
                    timer--;
                }
            }, 1000);
        }

        // End Quiz and Show Result
        function endQuiz() {
            clearInterval(timerInterval);
            document.getElementById("quiz-container").style.display = "none";
            document.getElementById("result-container").style.display = "block";
            document.getElementById("score-message").textContent = `Skor Anda: ${score}`;
            addLeaderboardEntry();
        }

        // Add to leaderboard
        function addLeaderboardEntry() {
            leaderboard.push({ name: userName, score });
            leaderboard.sort((a, b) => b.score - a.score);
            updateLeaderboard();
        }

        // Update leaderboard
        function updateLeaderboard() {
            const leaderboardList = document.getElementById("leaderboard-list");
            leaderboardList.innerHTML = leaderboard.map((entry, index) => {
                return `
                    <tr>
                        <td class="rank">${index + 1}</td>
                        <td class="name">${entry.name}</td>
                        <td class="score">${entry.score}</td>
                    </tr>
                `;
            }).join('');
        }

        // View Leaderboard
        function viewLeaderboard() {
            document.getElementById("leaderboard").style.display = "block";
        }

        // Restart Quiz
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            timer = 60;
            document.getElementById("result-container").style.display = "none";
            document.getElementById("name-input-container").style.display = "block";
            document.getElementById("user-name").value = "";
        }

        // Exit Game
        function exitGame() {
            window.location.reload();
        }
    </script>
</body>
</html>
