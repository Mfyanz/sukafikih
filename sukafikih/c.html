<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evaluasi Haji dan Umrah</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f0fdfa',
              100: '#ccfbf1',
              200: '#99f6e4',
              300: '#5eead4',
              400: '#2dd4bf',
              500: '#14b8a6',
              600: '#0d9488',
              700: '#0f766e',
              800: '#115e59',
              900: '#134e4a',
              950: '#042f2e',
            },
          },
          animation: {
            'bounce-slow': 'bounce 3s infinite',
            'pulse-slow': 'pulse 3s infinite',
            'spin-slow': 'spin 8s linear infinite',
          },
        },
      },
    }
  </script>
  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes scale {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeInRight {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes fadeOutLeft {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(-20px); }
    }
    
    @keyframes fadeInLeft {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes fadeOutRight {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(20px); }
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }
    
    @keyframes progress {
      0% { width: 0%; }
      100% { width: 100%; }
    }
    
    .animate-float {
      animation: float 3s ease-in-out infinite;
    }
    
    .animate-scale {
      animation: scale 3s ease-in-out infinite;
    }
    
    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease-out forwards;
    }
    
    .animate-fadeInRight {
      animation: fadeInRight 0.6s ease-out forwards;
    }
    
    .animate-fadeInLeft {
      animation: fadeInLeft 0.6s ease-out forwards;
    }
    
    .animate-scaleIn {
      animation: scaleIn 0.5s ease-out forwards;
    }
    
    .animate-progress {
      animation: progress 15s linear forwards;
    }
    
    .option-hover:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .option-selected {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .bg-pattern {
      background-color: #f9fafb;
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2314b8a6' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    
    .bg-gradient {
      background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
    }
    
    .text-shadow {
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .card-shadow {
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .timer-animation {
      transition: width 1s linear;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb {
      background: #14b8a6;
      border-radius: 10px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: #0d9488;
    }
    
    /* Confetti animation */
    @keyframes confetti-slow {
      0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
      100% { transform: translate3d(25px, 105vh, 0) rotateX(360deg) rotateY(180deg); }
    }
    
    @keyframes confetti-medium {
      0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
      100% { transform: translate3d(100px, 105vh, 0) rotateX(100deg) rotateY(360deg); }
    }
    
    @keyframes confetti-fast {
      0% { transform: translate3d(0, 0, 0) rotateX(0) rotateY(0); }
      100% { transform: translate3d(-50px, 105vh, 0) rotateX(10deg) rotateY(250deg); }
    }
    
    .confetti {
      position: absolute;
      z-index: 1;
      top: -10px;
      border-radius: 0%;
    }
    
    .confetti--animation-slow {
      animation: confetti-slow 2.5s linear 1 forwards;
    }
    
    .confetti--animation-medium {
      animation: confetti-medium 2s linear 1 forwards;
    }
    
    .confetti--animation-fast {
      animation: confetti-fast 1.5s linear 1 forwards;
    }
  </style>
</head>
<body class="bg-pattern min-h-screen font-sans text-gray-800">
  <div id="confetti-container" class="fixed inset-0 pointer-events-none hidden"></div>
  
  <div class="container mx-auto px-4 py-8 max-w-5xl">
    <!-- Header -->
    <header class="text-center mb-8 relative">
      <div class="absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-brand-200 rounded-full filter blur-3xl opacity-30 animate-pulse-slow"></div>
      <h1 class="text-4xl md:text-5xl font-bold text-brand-800 mb-2 relative z-10">Evaluasi Haji dan Umrah</h1>
      <p class="text-gray-600 text-lg relative z-10">Uji pemahaman Anda tentang ibadah Haji dan Umrah</p>
    </header>
    
    <!-- Start Screen -->
    <div id="start-screen" class="relative">
      <div class="absolute -top-10 -left-10 w-40 h-40 bg-brand-200 rounded-full filter blur-3xl opacity-30 animate-float"></div>
      <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-brand-200 rounded-full filter blur-3xl opacity-30 animate-float" style="animation-delay: 1s;"></div>
      
      <div class="bg-white rounded-3xl overflow-hidden card-shadow relative z-10">
        <div class="bg-gradient p-8 text-white relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-x-1/4 -translate-y-1/4"></div>
          <div class="absolute bottom-0 left-0 w-40 h-40 bg-white opacity-5 rounded-full translate-x-1/4 translate-y-1/4"></div>
          
          <h2 class="text-3xl font-bold mb-3 text-shadow">Selamat Datang</h2>
          <p class="text-lg opacity-90">Siap untuk menguji pengetahuan Anda tentang Haji dan Umrah?</p>
        </div>
        
        <div class="p-8">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-brand-50 rounded-2xl p-5 border border-brand-100 animate-fadeInUp" style="animation-delay: 0.1s;">
              <div class="flex items-center gap-4">
                <div class="bg-brand-100 p-3 rounded-xl">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                  </svg>
                </div>
                <div>
                  <h3 class="text-gray-500 font-medium">Jumlah Soal</h3>
                  <p class="text-2xl font-bold text-brand-700">15 Soal</p>
                </div>
              </div>
            </div>
            
            <div class="bg-brand-50 rounded-2xl p-5 border border-brand-100 animate-fadeInUp" style="animation-delay: 0.2s;">
              <div class="flex items-center gap-4">
                <div class="bg-brand-100 p-3 rounded-xl">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <h3 class="text-gray-500 font-medium">Waktu</h3>
                  <p class="text-2xl font-bold text-brand-700">15 Menit</p>
                </div>
              </div>
            </div>
            
            <div class="bg-brand-50 rounded-2xl p-5 border border-brand-100 animate-fadeInUp" style="animation-delay: 0.3s;">
              <div class="flex items-center gap-4">
                <div class="bg-brand-100 p-3 rounded-xl">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                </div>
                <div>
                  <h3 class="text-gray-500 font-medium">Nilai Lulus</h3>
                  <p class="text-2xl font-bold text-brand-700">70%</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bg-amber-50 border border-amber-200 rounded-2xl p-6 mb-8 animate-fadeInUp" style="animation-delay: 0.4s;">
            <div class="flex items-start gap-4">
              <div class="bg-amber-100 p-2 rounded-lg mt-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <div>
                <h3 class="text-lg font-semibold text-amber-800 mb-2">Petunjuk Pengerjaan</h3>
                <ul class="text-amber-700 space-y-2 list-disc pl-5">
                  <li>Quiz ini terdiri dari 15 pertanyaan pilihan ganda</li>
                  <li>Anda memiliki waktu 15 menit untuk menyelesaikan quiz</li>
                  <li>Setiap pertanyaan bernilai 1 poin</li>
                  <li>Hasil dan jawaban benar akan ditampilkan setelah quiz selesai</li>
                  <li>Jawablah dengan jujur dan teliti</li>
                </ul>
              </div>
            </div>
          </div>
          
          <button id="start-button" class="w-full py-4 bg-gradient text-white text-lg font-semibold rounded-xl card-shadow transition-all duration-300 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98] animate-fadeInUp flex items-center justify-center gap-3" style="animation-delay: 0.5s;">
            <span>Mulai Quiz</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    
    <!-- Quiz Screen -->
    <div id="quiz-screen" class="hidden">
      <!-- Timer and Progress -->
      <div class="flex flex-col md:flex-row gap-4 mb-6">
        <div class="bg-white rounded-2xl p-4 card-shadow flex-grow animate-fadeInUp">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-3">
              <div class="bg-brand-100 p-2 rounded-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </div>
              <div>
                <div class="text-sm text-gray-500">Waktu Tersisa</div>
                <div id="timer" class="text-xl font-bold text-brand-700">15:00</div>
              </div>
            </div>
            
            <div class="flex items-center gap-3">
              <div class="text-sm text-gray-500">Pertanyaan</div>
              <div class="bg-brand-100 text-brand-800 font-bold px-3 py-1 rounded-lg">
                <span id="current-question">1</span>/<span id="total-questions">15</span>
              </div>
            </div>
          </div>
          
          <div class="mt-4 relative h-2 bg-gray-200 rounded-full overflow-hidden">
            <div id="timer-bar" class="absolute top-0 left-0 h-full bg-brand-500 animate-progress"></div>
          </div>
        </div>
        
        <div class="bg-white rounded-2xl p-4 card-shadow md:w-48 animate-fadeInUp" style="animation-delay: 0.1s;">
          <div class="flex items-center gap-3">
            <div class="bg-brand-100 p-2 rounded-lg">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
              </svg>
            </div>
            <div>
              <div class="text-sm text-gray-500">Skor Saat Ini</div>
              <div id="current-score" class="text-xl font-bold text-brand-700">0</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Question Card -->
      <div id="question-container" class="bg-white rounded-2xl overflow-hidden card-shadow mb-6 animate-fadeInRight">
        <div class="bg-gradient p-6 text-white relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-x-1/4 -translate-y-1/4"></div>
          <div class="absolute bottom-0 left-0 w-40 h-40 bg-white opacity-5 rounded-full translate-x-1/4 translate-y-1/4"></div>
          
          <div class="flex items-center gap-3 mb-2">
            <div class="bg-white bg-opacity-20 w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg">
              <span id="question-number">1</span>
            </div>
            <h3 class="text-lg opacity-80">Pertanyaan</h3>
          </div>
          
          <h2 id="question-text" class="text-xl md:text-2xl font-semibold"></h2>
        </div>
        
        <div id="options-container" class="p-6 space-y-4">
          <!-- Options will be inserted here by JavaScript -->
        </div>
      </div>
      
      <!-- Navigation Buttons -->
      <div class="flex justify-between gap-4 animate-fadeInUp" style="animation-delay: 0.3s;">
        <button id="prev-button" class="px-6 py-3 bg-white text-brand-700 font-medium rounded-xl card-shadow transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-brand-50">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          Sebelumnya
        </button>
        
        <button id="next-button" class="px-6 py-3 bg-gradient text-white font-medium rounded-xl card-shadow transition-all duration-200 flex items-center gap-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]">
          <span id="next-button-text">Selanjutnya</span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>
    
    <!-- Results Screen -->
    <div id="results-screen" class="hidden">
      <div class="bg-white rounded-3xl overflow-hidden card-shadow mb-8 animate-scaleIn">
        <div class="bg-gradient p-8 text-white text-center relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-x-1/4 -translate-y-1/4"></div>
          <div class="absolute bottom-0 left-0 w-40 h-40 bg-white opacity-5 rounded-full translate-x-1/4 translate-y-1/4"></div>
          
          <h2 class="text-3xl font-bold mb-2 text-shadow">Hasil Evaluasi</h2>
          <p class="text-lg opacity-90">Berikut adalah hasil evaluasi pembelajaran Anda</p>
        </div>
        
        <div class="p-8">
          <!-- Score Summary -->
          <div class="flex flex-col md:flex-row items-center justify-center gap-8 mb-8">
            <!-- Score Circle -->
            <div class="relative w-56 h-56 animate-fadeInUp" style="animation-delay: 0.2s;">
              <svg class="w-full h-full" viewBox="0 0 100 100">
                <circle class="text-gray-100" stroke-width="8" stroke="currentColor" fill="transparent" r="46" cx="50" cy="50"></circle>
                <circle id="score-circle" class="text-brand-500 transition-all duration-1000 ease-out" stroke-width="8" stroke="currentColor" fill="transparent" r="46" cx="50" cy="50" stroke-dasharray="0 289" stroke-dashoffset="0" stroke-linecap="round" transform="rotate(-90 50 50)"></circle>
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="percentage-score" class="text-5xl font-bold text-brand-700">0%</span>
                <span class="text-gray-500 text-lg">Nilai Anda</span>
              </div>
            </div>
            
            <!-- Score Details -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full max-w-xl">
              <div class="bg-emerald-50 p-5 rounded-2xl border border-emerald-100 animate-fadeInUp" style="animation-delay: 0.3s;">
                <div class="flex items-center gap-4">
                  <div class="bg-emerald-100 p-3 rounded-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-gray-500 font-medium">Jawaban Benar</h3>
                    <p id="correct-answers" class="text-2xl font-bold text-emerald-600">0</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-rose-50 p-5 rounded-2xl border border-rose-100 animate-fadeInUp" style="animation-delay: 0.4s;">
                <div class="flex items-center gap-4">
                  <div class="bg-rose-100 p-3 rounded-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-rose-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-gray-500 font-medium">Jawaban Salah</h3>
                    <p id="wrong-answers" class="text-2xl font-bold text-rose-600">0</p>
                  </div>
                </div>
              </div>
              
              <div class="bg-amber-50 p-5 rounded-2xl border border-amber-100 animate-fadeInUp" style="animation-delay: 0.5s;">
                <div class="flex items-center gap-4">
                  <div class="bg-amber-100 p-3 rounded-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-gray-500 font-medium">Waktu</h3>
                    <p id="time-spent" class="text-2xl font-bold text-amber-600">00:00</p>
                  </div>
                </div>
              </div>
              
              <div id="status-card" class="p-5 rounded-2xl border animate-fadeInUp" style="animation-delay: 0.6s;">
                <div class="flex items-center gap-4">
                  <div class="p-3 rounded-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                  </div>
                  <div>
                    <h3 class="text-gray-500 font-medium">Status</h3>
                    <p id="pass-status" class="text-2xl font-bold">-</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Action Buttons -->
          <div class="flex flex-col sm:flex-row gap-4 mb-8 animate-fadeInUp" style="animation-delay: 0.7s;">
            <button id="share-button" class="flex-1 py-4 bg-brand-600 hover:bg-brand-700 text-white font-medium rounded-xl card-shadow transition-all duration-200 flex items-center justify-center gap-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
              </svg>
              Bagikan Hasil
            </button>
            
            <button id="review-button" class="flex-1 py-4 bg-brand-600 hover:bg-brand-700 text-white font-medium rounded-xl card-shadow transition-all duration-200 flex items-center justify-center gap-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
              </svg>
              Lihat Jawaban
            </button>
            
            <button id="retry-button" class="flex-1 py-4 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-xl card-shadow transition-all duration-200 flex items-center justify-center gap-2 hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
              </svg>
              Coba Lagi
            </button>
          </div>
        </div>
      </div>
      
      <!-- Answer Review Section -->
      <div id="answer-review" class="bg-white rounded-3xl overflow-hidden card-shadow mb-8 animate-scaleIn hidden">
        <div class="bg-gradient p-6 text-white relative overflow-hidden">
          <div class="absolute top-0 right-0 w-64 h-64 bg-white opacity-5 rounded-full -translate-x-1/4 -translate-y-1/4"></div>
          <div class="absolute bottom-0 left-0 w-40 h-40 bg-white opacity-5 rounded-full translate-x-1/4 translate-y-1/4"></div>
          
          <h2 class="text-2xl font-bold mb-1 text-shadow">Pembahasan Jawaban</h2>
          <p class="opacity-90">Berikut adalah jawaban yang benar untuk setiap pertanyaan</p>
        </div>
        
        <div id="review-container" class="p-6 divide-y divide-gray-200">
          <!-- Review items will be inserted here by JavaScript -->
        </div>
      </div>
    </div>
    
    <!-- Share Dialog -->
    <div id="share-dialog" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden backdrop-blur-sm">
      <div class="bg-white rounded-2xl max-w-md w-full mx-4 card-shadow transform transition-all duration-300 scale-100 p-6 animate-scaleIn">
        <h3 class="text-xl font-bold mb-4 text-brand-800">Bagikan Hasil</h3>
        <p class="text-gray-600 mb-6">Bagikan hasil evaluasi pembelajaran Haji dan Umrah Anda melalui:</p>
        
        <div class="grid grid-cols-2 gap-4 mb-6">
          <button id="whatsapp-share" class="flex flex-col items-center justify-center gap-2 p-4 bg-emerald-50 hover:bg-emerald-100 text-emerald-800 rounded-xl transition-all duration-200 hover:scale-105">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="currentColor" viewBox="0 0 24 24">
              <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
            </svg>
            <span class="font-medium">WhatsApp</span>
          </button>
          
          <button id="copy-result" class="flex flex-col items-center justify-center gap-2 p-4 bg-blue-50 hover:bg-blue-100 text-blue-800 rounded-xl transition-all duration-200 hover:scale-105">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
            </svg>
            <span class="font-medium">Salin Hasil</span>
          </button>
        </div>
        
        <div class="flex justify-end gap-3 mt-6">
          <button id="cancel-share" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-all duration-200 hover:scale-105">
            Tutup
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Quiz questions
    const questions = [
      {
        id: 1,
        question: "Apa yang dimaksud dengan Istitha'ah dalam konteks ibadah haji?",
        options: [
          { id: "a", text: "Kemampuan fisik dan finansial untuk melaksanakan haji" },
          { id: "b", text: "Kemampuan membaca doa-doa haji dengan benar" },
          { id: "c", text: "Kemampuan menghafal manasik haji" },
          { id: "d", text: "Kemampuan berjalan kaki selama ibadah haji" },
        ],
        correctAnswer: "a",
        explanation: "Istitha'ah adalah kemampuan atau kesanggupan seseorang untuk melaksanakan ibadah haji, baik dari segi fisik (kesehatan) maupun finansial (biaya). Ini merupakan syarat wajib haji sebagaimana disebutkan dalam QS. Ali Imran ayat 97."
      },
      {
        id: 2,
        question: "Apa perbedaan antara haji ifrad, haji qiran, dan haji tamattu?",
        options: [
          { id: "a", text: "Perbedaan waktu pelaksanaannya" },
          { id: "b", text: "Perbedaan jumlah tawaf yang dilakukan" },
          { id: "c", text: "Perbedaan cara pelaksanaan dan urutan ibadah haji dan umrah" },
          { id: "d", text: "Perbedaan tempat pelaksanaannya" },
        ],
        correctAnswer: "c",
        explanation: "Perbedaan utama antara haji ifrad, qiran, dan tamattu terletak pada cara pelaksanaan dan urutan ibadah haji dan umrah. Haji ifrad adalah melaksanakan haji saja tanpa umrah. Haji qiran adalah melaksanakan haji dan umrah secara bersamaan dengan satu niat dan satu rangkaian. Haji tamattu adalah melaksanakan umrah terlebih dahulu pada bulan haji, lalu bertahallul, kemudian berniat haji lagi pada tanggal 8 Dzulhijjah."
      },
      {
        id: 3,
        question: "Kapan waktu pelaksanaan wukuf di Arafah?",
        options: [
          { id: "a", text: "Tanggal 8 Dzulhijjah" },
          { id: "b", text: "Tanggal 9 Dzulhijjah" },
          { id: "c", text: "Tanggal 10 Dzulhijjah" },
          { id: "d", text: "Tanggal 11 Dzulhijjah" },
        ],
        correctAnswer: "b",
        explanation: "Wukuf di Arafah dilaksanakan pada tanggal 9 Dzulhijjah, dimulai setelah matahari tergelincir (waktu Dzuhur) hingga terbit fajar pada tanggal 10 Dzulhijjah. Wukuf merupakan rukun haji yang paling utama, sehingga jika seseorang tidak melaksanakan wukuf, maka hajinya tidak sah."
      },
      {
        id: 4,
        question: "Apa yang dimaksud dengan Miqat Makani?",
        options: [
          { id: "a", text: "Waktu untuk melaksanakan ibadah haji" },
          { id: "b", text: "Tempat untuk memulai ihram" },
          { id: "c", text: "Tempat untuk melaksanakan tawaf" },
          { id: "d", text: "Waktu untuk melaksanakan umrah" },
        ],
        correctAnswer: "b",
        explanation: "Miqat Makani adalah tempat-tempat tertentu yang telah ditetapkan oleh Rasulullah SAW sebagai batas untuk memulai ihram bagi jamaah haji atau umrah. Ada lima miqat makani utama: Dzulhulaifah (untuk penduduk Madinah), Juhfah (untuk penduduk Syam), Qarnul Manazil (untuk penduduk Najd), Yalamlam (untuk penduduk Yaman), dan Dzatu Irqin (untuk penduduk Irak)."
      },
      {
        id: 5,
        question: "Apa yang dimaksud dengan Tawaf Qudum?",
        options: [
          { id: "a", text: "Tawaf yang dilakukan setelah wukuf di Arafah" },
          { id: "b", text: "Tawaf yang dilakukan saat pertama kali tiba di Makkah" },
          { id: "c", text: "Tawaf perpisahan sebelum meninggalkan Makkah" },
          { id: "d", text: "Tawaf yang dilakukan sebagai pengganti dam (denda)" },
        ],
        correctAnswer: "b",
        explanation: "Tawaf Qudum adalah tawaf yang dilakukan saat pertama kali tiba di Makkah sebagai penghormatan kepada Baitullah. Tawaf ini hukumnya sunnah bagi jamaah haji yang melaksanakan haji ifrad atau qiran, dan tidak dilakukan oleh jamaah yang melaksanakan haji tamattu karena mereka langsung melaksanakan tawaf umrah."
      },
      {
        id: 6,
        question: "Apa yang dimaksud dengan Tawaf Wada?",
        options: [
          { id: "a", text: "Tawaf yang dilakukan saat pertama kali tiba di Makkah" },
          { id: "b", text: "Tawaf yang dilakukan setelah wukuf di Arafah" },
          { id: "c", text: "Tawaf perpisahan sebelum meninggalkan Makkah" },
          { id: "d", text: "Tawaf yang dilakukan sebagai pengganti dam (denda)" },
        ],
        correctAnswer: "c",
        explanation: "Tawaf Wada adalah tawaf perpisahan yang dilakukan sebelum meninggalkan Makkah untuk pulang ke negeri masing-masing. Tawaf ini hukumnya wajib bagi jamaah haji dan umrah, kecuali bagi wanita yang sedang haid atau nifas."
      },
      {
        id: 7,
        question: "Apa yang dimaksud dengan Mabit di Muzdalifah?",
        options: [
          { id: "a", text: "Bermalam di Muzdalifah pada malam 10 Dzulhijjah" },
          { id: "b", text: "Bermalam di Muzdalifah pada malam 9 Dzulhijjah" },
          { id: "c", text: "Bermalam di Muzdalifah pada malam 11 Dzulhijjah" },
          { id: "d", text: "Bermalam di Muzdalifah pada malam 12 Dzulhijjah" },
        ],
        correctAnswer: "a",
        explanation: "Mabit di Muzdalifah adalah bermalam atau berhenti sejenak di Muzdalifah pada malam 10 Dzulhijjah (setelah wukuf di Arafah). Waktu mabit di Muzdalifah adalah setelah Maghrib hingga terbit fajar. Di Muzdalifah, jamaah haji melaksanakan shalat Maghrib dan Isya dengan jama' ta'khir dan mengumpulkan batu untuk melempar jumrah."
      },
      {
        id: 8,
        question: "Apa yang dimaksud dengan Mabit di Mina?",
        options: [
          { id: "a", text: "Bermalam di Mina pada tanggal 8 Dzulhijjah" },
          { id: "b", text: "Bermalam di Mina pada tanggal 9 Dzulhijjah" },
          { id: "c", text: "Bermalam di Mina pada malam hari tasyriq (11, 12, dan 13 Dzulhijjah)" },
          { id: "d", text: "Bermalam di Mina pada tanggal 10 Dzulhijjah" },
        ],
        correctAnswer: "c",
        explanation: "Mabit di Mina adalah bermalam di Mina pada malam hari-hari tasyriq, yaitu malam 11, 12, dan 13 Dzulhijjah. Mabit di Mina hukumnya wajib bagi jamaah haji, dan bagi yang tidak melaksanakannya wajib membayar dam (denda)."
      },
      {
        id: 9,
        question: "Apa yang dimaksud dengan Tahallul dalam ibadah haji?",
        options: [
          { id: "a", text: "Niat untuk memulai ibadah haji" },
          { id: "b", text: "Proses pengundian untuk mendapatkan kuota haji" },
          { id: "c", text: "Keadaan diperbolehkannya melakukan hal-hal yang dilarang saat ihram" },
          { id: "d", text: "Proses pembayaran biaya haji" },
        ],
        correctAnswer: "c",
        explanation: "Tahallul adalah keadaan diperbolehkannya kembali melakukan hal-hal yang dilarang saat ihram setelah melakukan amalan-amalan tertentu. Dalam haji, ada tahallul awal (setelah melakukan dua dari tiga amalan: melempar jumrah aqabah, mencukur/memotong rambut, dan tawaf ifadah) dan tahallul tsani (setelah melakukan semua amalan tersebut)."
      },
      {
        id: 10,
        question: "Apa yang dimaksud dengan Dam dalam konteks ibadah haji?",
        options: [
          { id: "a", text: "Doa khusus yang dibaca saat tawaf" },
          { id: "b", text: "Denda atau tebusan karena melanggar larangan ihram atau meninggalkan wajib haji" },
          { id: "c", text: "Tempat khusus untuk bermalam di Mina" },
          { id: "d", text: "Ritual khusus setelah melempar jumrah" },
        ],
        correctAnswer: "b",
        explanation: "Dam adalah denda atau tebusan yang harus dibayarkan oleh jamaah haji atau umrah karena melanggar larangan ihram atau meninggalkan salah satu wajib haji/umrah. Dam dapat berupa menyembelih seekor kambing, berpuasa 10 hari, atau memberi makan 6 orang miskin, tergantung jenis pelanggarannya."
      },
      {
        id: 11,
        question: "Apa yang dimaksud dengan Jumrah dalam ibadah haji?",
        options: [
          { id: "a", text: "Tempat untuk bermalam di Mina" },
          { id: "b", text: "Batu kecil yang digunakan untuk melempar" },
          { id: "c", text: "Tiang atau tempat untuk melempar batu" },
          { id: "d", text: "Ritual khusus setelah wukuf di Arafah" },
        ],
        correctAnswer: "c",
        explanation: "Jumrah adalah tiang atau tempat yang menjadi sasaran lemparan batu dalam ritual melempar jumrah pada ibadah haji. Ada tiga jumrah: Jumrah Ula (kecil), Jumrah Wustha (tengah), dan Jumrah Aqabah (besar). Ritual melempar jumrah dilakukan pada hari-hari tasyriq (11, 12, dan 13 Dzulhijjah) sebagai simbolisasi pengusiran setan."
      },
      {
        id: 12,
        question: "Apa yang dimaksud dengan Sa'i dalam ibadah haji dan umrah?",
        options: [
          { id: "a", text: "Berjalan mengelilingi Ka'bah sebanyak 7 kali" },
          { id: "b", text: "Berjalan atau berlari-lari kecil antara bukit Shafa dan Marwah sebanyak 7 kali" },
          { id: "c", text: "Berdiam diri di Arafah pada tanggal 9 Dzulhijjah" },
          { id: "d", text: "Melempar jumrah pada hari-hari tasyriq" },
        ],
        correctAnswer: "b",
        explanation: "Sa'i adalah berjalan atau berlari-lari kecil antara bukit Shafa dan Marwah sebanyak 7 kali. Sa'i dimulai dari bukit Shafa dan berakhir di bukit Marwah. Sa'i merupakan salah satu rukun haji dan umrah yang mengenang perjuangan Siti Hajar saat mencari air untuk putranya, Ismail."
      },
      {
        id: 13,
        question: "Apa yang dimaksud dengan Thawaf Ifadhah dalam ibadah haji?",
        options: [
          { id: "a", text: "Tawaf yang dilakukan saat pertama kali tiba di Makkah" },
          { id: "b", text: "Tawaf perpisahan sebelum meninggalkan Makkah" },
          { id: "c", text: "Tawaf yang dilakukan setelah wukuf di Arafah" },
          { id: "d", text: "Tawaf yang dilakukan sebagai pengganti dam (denda)" },
        ],
        correctAnswer: "c",
        explanation: "Thawaf Ifadhah adalah tawaf yang dilakukan setelah wukuf di Arafah, biasanya pada tanggal 10 Dzulhijjah atau hari-hari tasyriq. Thawaf Ifadhah merupakan salah satu rukun haji, sehingga jika tidak dilaksanakan, maka hajinya tidak sah."
      },
      {
        id: 14,
        question: "Apa yang dimaksud dengan Ihram dalam ibadah haji dan umrah?",
        options: [
          { id: "a", text: "Pakaian khusus yang dikenakan saat melaksanakan haji dan umrah" },
          { id: "b", text: "Niat untuk memulai ibadah haji atau umrah dan memakai pakaian ihram" },
          { id: "c", text: "Ritual khusus sebelum memasuki kota Makkah" },
          { id: "d", text: "Doa khusus yang dibaca saat memulai tawaf" },
        ],
        correctAnswer: "b",
        explanation: "Ihram adalah niat untuk memulai ibadah haji atau umrah dan memakai pakaian ihram. Pakaian ihram untuk laki-laki berupa dua helai kain putih tidak berjahit, sedangkan untuk perempuan berupa pakaian yang menutup seluruh tubuh kecuali wajah dan telapak tangan. Saat ihram, ada beberapa larangan yang harus dijauhi."
      },
      {
        id: 15,
        question: "Apa hikmah dari ritual melempar jumrah dalam ibadah haji?",
        options: [
          { id: "a", text: "Untuk melatih ketepatan dalam melempar" },
          { id: "b", text: "Untuk menguji kesabaran jamaah haji" },
          { id: "c", text: "Untuk mengenang perjuangan Nabi Ibrahim AS melawan godaan setan" },
          { id: "d", text: "Untuk membersihkan diri dari dosa-dosa kecil" },
        ],
        correctAnswer: "c",
        explanation: "Hikmah dari ritual melempar jumrah adalah untuk mengenang perjuangan Nabi Ibrahim AS ketika melawan godaan setan yang berusaha menghalanginya melaksanakan perintah Allah untuk menyembelih putranya, Ismail AS. Ritual ini juga melambangkan tekad kuat seorang muslim untuk melawan godaan setan dalam kehidupan sehari-hari."
      }
    ];

    // Quiz state
    let currentQuestionIndex = 0;
    let selectedAnswers = {};
    let timeLeft = 15 * 60; // 15 minutes in seconds
    let timerInterval;
    let quizStarted = false;
    let quizFinished = false;
    let startTime;
    let direction = 'next'; // For animation direction

    // DOM elements
    const startScreen = document.getElementById('start-screen');
    const quizScreen = document.getElementById('quiz-screen');
    const resultsScreen = document.getElementById('results-screen');
    const answerReview = document.getElementById('answer-review');
    const shareDialog = document.getElementById('share-dialog');
    const confettiContainer = document.getElementById('confetti-container');
    
    const startButton = document.getElementById('start-button');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');
    const nextButtonText = document.getElementById('next-button-text');
    const shareButton = document.getElementById('share-button');
    const reviewButton = document.getElementById('review-button');
    const retryButton = document.getElementById('retry-button');
    const cancelShareButton = document.getElementById('cancel-share');
    const whatsappShareButton = document.getElementById('whatsapp-share');
    const copyResultButton = document.getElementById('copy-result');
    
    const totalQuestionsSpan = document.getElementById('total-questions');
    const currentQuestionSpan = document.getElementById('current-question');
    const questionNumberSpan = document.getElementById('question-number');
    const questionTextElement = document.getElementById('question-text');
    const questionContainer = document.getElementById('question-container');
    const optionsContainer = document.getElementById('options-container');
    const timerElement = document.getElementById('timer');
    const timerBar = document.getElementById('timer-bar');
    const currentScoreSpan = document.getElementById('current-score');
    
    const percentageScoreSpan = document.getElementById('percentage-score');
    const correctAnswersSpan = document.getElementById('correct-answers');
    const wrongAnswersSpan = document.getElementById('wrong-answers');
    const timeSpentSpan = document.getElementById('time-spent');
    const passStatusSpan = document.getElementById('pass-status');
    const statusCard = document.getElementById('status-card');
    const scoreCircle = document.getElementById('score-circle');
    const reviewContainer = document.getElementById('review-container');

    // Initialize
    function init() {
      totalQuestionsSpan.textContent = questions.length;
      
      // Event listeners
      startButton.addEventListener('click', startQuiz);
      prevButton.addEventListener('click', () => {
        direction = 'prev';
        handlePrevQuestion();
      });
      nextButton.addEventListener('click', () => {
        direction = 'next';
        handleNextQuestion();
      });
      shareButton.addEventListener('click', () => shareDialog.classList.remove('hidden'));
      reviewButton.addEventListener('click', toggleReviewSection);
      retryButton.addEventListener('click', handleRetry);
      cancelShareButton.addEventListener('click', () => shareDialog.classList.add('hidden'));
      whatsappShareButton.addEventListener('click', handleShareWhatsApp);
      copyResultButton.addEventListener('click', handleCopyResult);
    }

    // Start quiz
    function startQuiz() {
      quizStarted = true;
      startTime = new Date();
      
      startScreen.classList.add('hidden');
      quizScreen.classList.remove('hidden');
      
      // Reset timer animation
      timerBar.classList.remove('animate-progress');
      void timerBar.offsetWidth; // Trigger reflow
      timerBar.classList.add('animate-progress');
      
      // Start timer
      startTimer();
      
      // Load first question
      loadQuestion();
    }

    // Load question
    function loadQuestion() {
      const question = questions[currentQuestionIndex];
      
      // Update question number and text
      currentQuestionSpan.textContent = currentQuestionIndex + 1;
      questionNumberSpan.textContent = currentQuestionIndex + 1;
      questionTextElement.textContent = question.question;
      
      // Apply animation based on direction
      questionContainer.classList.remove('animate-fadeInRight', 'animate-fadeInLeft');
      void questionContainer.offsetWidth; //  'animate-fadeInLeft');
      void questionContainer.offsetWidth; // Trigger reflow
      questionContainer.classList.add(direction === 'next' ? 'animate-fadeInRight' : 'animate-fadeInLeft');
      
      // Clear options container
      optionsContainer.innerHTML = '';
      
      // Add options with animation
      question.options.forEach((option, index) => {
        const isSelected = selectedAnswers[question.id] === option.id;
        const optionElement = document.createElement('div');
        optionElement.className = `p-4 rounded-xl border-2 transition-all duration-300 cursor-pointer option-hover ${isSelected ? 'border-brand-500 bg-brand-50 option-selected' : 'border-gray-200 hover:border-brand-300 hover:bg-brand-50'}`;
        optionElement.style.animationDelay = `${index * 0.1}s`;
        optionElement.innerHTML = `
          <div class="flex items-center gap-4">
            <div class="flex-shrink-0 w-10 h-10 rounded-xl ${isSelected ? 'bg-brand-500 text-white' : 'bg-gray-100 text-gray-700'} flex items-center justify-center font-bold text-lg transition-all duration-300">
              ${option.id.toUpperCase()}
            </div>
            <div class="flex-grow text-lg">${option.text}</div>
          </div>
        `;
        
        optionElement.addEventListener('click', () => {
          // Select this option
          selectedAnswers[question.id] = option.id;
          
          // Update UI
          loadQuestion();
          
          // Update score
          updateScore();
        });
        
        optionsContainer.appendChild(optionElement);
      });
      
      // Update button text
      nextButtonText.textContent = currentQuestionIndex === questions.length - 1 ? 'Selesai' : 'Selanjutnya';
      
      // Update prev button state
      prevButton.disabled = currentQuestionIndex === 0;
    }

    // Handle next question
    function handleNextQuestion() {
      if (currentQuestionIndex < questions.length - 1) {
        currentQuestionIndex++;
        loadQuestion();
      } else {
        finishQuiz();
      }
    }

    // Handle previous question
    function handlePrevQuestion() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion();
      }
    }

    // Start timer
    function startTimer() {
      updateTimerDisplay();
      
      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          finishQuiz();
        }
      }, 1000);
    }

    // Update timer display
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      // Add warning class when time is running low
      if (timeLeft <= 60) {
        timerElement.classList.add('text-rose-600');
        timerElement.parentElement.classList.add('animate-pulse');
      }
    }

    // Update score
    function updateScore() {
      const score = calculateScore();
      currentScoreSpan.textContent = score;
    }

    // Calculate score
    function calculateScore() {
      let score = 0;
      questions.forEach(question => {
        if (selectedAnswers[question.id] === question.correctAnswer) {
          score++;
        }
      });
      return score;
    }

    // Create confetti
    function createConfetti() {
      confettiContainer.classList.remove('hidden');
      
      const colors = ['#14b8a6', '#0d9488', '#0f766e', '#115e59', '#134e4a'];
      const shapes = ['square', 'circle'];
      
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        const color = colors[Math.floor(Math.random() * colors.length)];
        const shape = shapes[Math.floor(Math.random() * shapes.length)];
        const size = Math.random() * 10 + 5;
        
        confetti.className = `confetti ${shape === 'circle' ? 'rounded-full' : ''}`;
        confetti.style.width = `${size}px`;
        confetti.style.height = `${size}px`;
        confetti.style.backgroundColor = color;
        confetti.style.left = `${Math.random() * 100}%`;
        
        const animationDuration = Math.random() * 3 + 2;
        const animationDelay = Math.random() * 5;
        
        confetti.style.animationDuration = `${animationDuration}s`;
        confetti.style.animationDelay = `${animationDelay}s`;
        
        if (Math.random() > 0.7) {
          confetti.classList.add('confetti--animation-slow');
        } else if (Math.random() > 0.4) {
          confetti.classList.add('confetti--animation-medium');
        } else {
          confetti.classList.add('confetti--animation-fast');
        }
        
        confettiContainer.appendChild(confetti);
      }
      
      setTimeout(() => {
        confettiContainer.classList.add('hidden');
        confettiContainer.innerHTML = '';
      }, 8000);
    }

    // Finish quiz
    function finishQuiz() {
      quizFinished = true;
      clearInterval(timerInterval);
      
      const endTime = new Date();
      const timeSpent = Math.floor((endTime - startTime) / 1000);
      const minutes = Math.floor(timeSpent / 60);
      const seconds = timeSpent % 60;
      
      quizScreen.classList.add('hidden');
      resultsScreen.classList.remove('hidden');
      
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const wrong = questions.length - score;
      
      // Update results UI
      percentageScoreSpan.textContent = `${percentage}%`;
      correctAnswersSpan.textContent = score;
      wrongAnswersSpan.textContent = wrong;
      timeSpentSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      // Determine pass status
      if (percentage >= 70) {
        passStatusSpan.textContent = 'Lulus';
        passStatusSpan.classList.add('text-emerald-600');
        statusCard.classList.add('bg-emerald-50', 'border-emerald-100');
        statusCard.querySelector('div').classList.add('bg-emerald-100');
        statusCard.querySelector('svg').classList.add('text-emerald-600');
        
        // Show confetti for passing
        createConfetti();
      } else {
        passStatusSpan.textContent = 'Belum Lulus';
        passStatusSpan.classList.add('text-rose-600');
        statusCard.classList.add('bg-rose-50', 'border-rose-100');
        statusCard.querySelector('div').classList.add('bg-rose-100');
        statusCard.querySelector('svg').classList.add('text-rose-600');
      }
      
      // Animate score circle
      setTimeout(() => {
        scoreCircle.style.strokeDasharray = `${(percentage / 100) * 289} 289`;
      }, 500);
      
      // Populate review section
      populateReviewSection();
    }

    // Populate review section
    function populateReviewSection() {
      reviewContainer.innerHTML = '';
      
      questions.forEach((question, index) => {
        const userAnswer = selectedAnswers[question.id] || '';
        const isCorrect = userAnswer === question.correctAnswer;
        
        const reviewItem = document.createElement('div');
        reviewItem.className = 'py-6 animate-fadeInUp';
        reviewItem.style.animationDelay = `${index * 0.1}s`;
        
        reviewItem.innerHTML = `
          <div class="flex items-start gap-4 mb-4">
            <div class="flex-shrink-0 w-10 h-10 rounded-xl ${isCorrect ? 'bg-emerald-100 text-emerald-700' : 'bg-rose-100 text-rose-700'} flex items-center justify-center font-bold text-lg mt-1">
              ${index + 1}
            </div>
            <div class="flex-grow">
              <h3 class="text-lg font-semibold text-gray-800 mb-3">${question.question}</h3>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-4">
                ${question.options.map(option => {
                  let optionClass = 'border-2 rounded-xl p-3 flex items-center gap-3';
                  
                  if (option.id === question.correctAnswer) {
                    optionClass += ' bg-emerald-50 border-emerald-200 text-emerald-800';
                  } else if (option.id === userAnswer && option.id !== question.correctAnswer) {
                    optionClass += ' bg-rose-50 border-rose-200 text-rose-800';
                  } else {
                    optionClass += ' border-gray-200 text-gray-600';
                  }
                  
                  return `
                    <div class="${optionClass}">
                      <div class="w-8 h-8 rounded-lg flex-shrink-0 flex items-center justify-center font-medium ${option.id === question.correctAnswer ? 'bg-emerald-200 text-emerald-800' : (option.id === userAnswer && option.id !== question.correctAnswer ? 'bg-rose-200 text-rose-800' : 'bg-gray-200 text-gray-700')}">
                        ${option.id.toUpperCase()}
                      </div>
                      <span>${option.text}</span>
                      ${option.id === question.correctAnswer ? '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-auto text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>' : ''}
                    </div>
                  `;
                }).join('')}
              </div>
              
              <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-800">
                <div class="font-medium mb-2 flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  Penjelasan:
                </div>
                <p>${question.explanation}</p>
              </div>
            </div>
          </div>
        `;
        
        reviewContainer.appendChild(reviewItem);
      });
    }

    // Toggle review section
    function toggleReviewSection() {
      answerReview.classList.toggle('hidden');
      
      if (!answerReview.classList.contains('hidden')) {
        answerReview.scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Handle share to WhatsApp
    function handleShareWhatsApp() {
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const passStatus = percentage >= 70 ? 'Lulus' : 'Belum Lulus';
      
      const text = `Saya baru saja menyelesaikan Quiz Evaluasi Haji dan Umrah dengan skor ${score}/${questions.length} (${percentage}%). Status: ${passStatus}`;
      const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
      
      window.open(url, "_blank");
      shareDialog.classList.add('hidden');
    }

    // Handle copy result
    function handleCopyResult() {
      const score = calculateScore();
      const percentage = Math.round((score / questions.length) * 100);
      const passStatus = percentage >= 70 ? 'Lulus' : 'Belum Lulus';
      
      const text = `Quiz Evaluasi Haji dan Umrah\nSkor: ${score}/${questions.length} (${percentage}%)\nStatus: ${passStatus}`;
      
      navigator.clipboard.writeText(text).then(() => {
        copyResultButton.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
          </svg>
          <span class="font-medium">Tersalin!</span>
        `;
        
        setTimeout(() => {
          copyResultButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
            </svg>
            <span class="font-medium">Salin Hasil</span>
          `;
        }, 2000);
      });
      
      shareDialog.classList.add('hidden');
    }

    // Handle retry
    function handleRetry() {
      // Reset quiz state
      currentQuestionIndex = 0;
      selectedAnswers = {};
      timeLeft = 15 * 60;
      quizStarted = false;
      quizFinished = false;
      
      // Reset UI
      resultsScreen.classList.add('hidden');
      answerReview.classList.add('hidden');
      startScreen.classList.remove('hidden');
      
      // Reset timer display
      timerElement.classList.remove('text-rose-600');
      timerElement.parentElement.classList.remove('animate-pulse');
    }

    // Initialize the app
    init();
  </script>
</body>
</html>